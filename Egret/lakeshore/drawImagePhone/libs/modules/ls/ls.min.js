var ls;!function(e){var t=function(e){function t(){e.call(this),this._sid=0,t.UID++,this._sid=t.UID}__extends(t,e);var n=__define,i=t,a=i.prototype;return n(a,"sid",function(){return this._sid}),n(a,"className",function(){return egret.getQualifiedClassName(this)}),a.getClass=function(){return this.constructor},a.clone=function(){return new t},t.UID=0,t}(egret.EventDispatcher);e.BaseClass=t,egret.registerClass(t,"ls.BaseClass")}(ls||(ls={}));var ls;!function(e){var t=function(e){function t(){e.call(this),this.index=0,this.instances={}}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseClass);e.Action=t,egret.registerClass(t,"ls.Action")}(ls||(ls={}));var ls;!function(e){var t=function(t){function n(){t.call(this),this.enabled=1,this.isCreated=!1,e.Trigger.register(this)}__extends(n,t);var i=(__define,n),a=i.prototype;return a.onCreate=function(){},a.tick=function(){},a.saveToJSON=function(){return{enabled:this.enabled,name:this.name,paramInstances:this.paramInstances}},a.loadFromJSON=function(e){e&&(this.enabled=e.enabled,this.name=e.name,this.paramInstances=e.paramInstances)},a.destory=function(){},a.clone=function(){return new n},n}(egret.EventDispatcher);e.BaseBehavior=t,egret.registerClass(t,"ls.BaseBehavior")}(ls||(ls={}));var ls;!function(e){var t=function(){function e(){this.radius=0}var t=(__define,e);t.prototype;return e}();e.Circle=t,egret.registerClass(t,"ls.Circle");var n=function(){function n(){}var i=(__define,n);i.prototype;return n.checkCollision=function(t,n){if(!t||!n)return!1;new e.Vector2D(t.x,t.y),new e.Vector2D(n.x,n.y);return 0==t.collisionType&&0==n.collisionType?this.checkPolygonCollisionPolygon(t,n):1==t.collisionType&&1==n.collisionType?this.checkCircleCollisionCircle(t,n):2==t.collisionType&&2==n.collisionType?this.checkDotCollisionDot(t,n):0==t.collisionType&&1==n.collisionType?this.checkCircleCollisionPolygon(n,t):1==t.collisionType&&0==n.collisionType?this.checkCircleCollisionPolygon(t,n):0==t.collisionType&&2==n.collisionType?this.checkDotCollisionPolygon(n,t):2==t.collisionType&&0==n.collisionType?this.checkDotCollisionPolygon(t,n):1==t.collisionType&&2==n.collisionType?this.checkDotCollisionCircle(n,t):2==t.collisionType&&1==n.collisionType?this.checkDotCollisionCircle(t,n):!1},n.checkPolygonCollisionPolygon=function(t,n){var i=!1;if(0==t.angle&&0==n.angle&&1==t.collisionVectorData.length&&1==n.collisionVectorData.length&&4==t.collisionVectorData[0].length&&4==n.collisionVectorData[0].length)i=this.checkCommonCollision(t,n);else{for(var a=t.angle*Math.PI/180,r=n.angle*Math.PI/180,s=[],o=0;o<t.collisionVectorData.length;o++){for(var l=[],c=0;c<t.collisionVectorData[o].length;c++){var h=t.collisionVectorData[o][c],u=new egret.Matrix;u.translate(h.x-t.anchorOffsetX,h.y-t.anchorOffsetY),u.scale(t.scaleX,t.scaleY),u.rotate(a),l[c]=new e.Vector2D(u.tx,u.ty)}s[o]=l}for(var v=[],f=0;f<n.collisionVectorData.length;f++){for(var g=[],d=0;d<n.collisionVectorData[f].length;d++){var p=n.collisionVectorData[f][d],y=new egret.Matrix;y.translate(p.x-n.anchorOffsetX,p.y-n.anchorOffsetY),y.scale(n.scaleX,n.scaleY),y.rotate(r),g[d]=new e.Vector2D(y.tx,y.ty)}v[f]=g}if(s.length<v.length)for(var _=0;_<s.length;_++){for(var m=s[_],b=0;b<v.length;b++){var x=v[b];if(i=e.SAT.sat(new e.Vector2D(t.x,t.y),new e.Vector2D(n.x,n.y),m,x))break}if(i)break}else for(var _=0;_<v.length;_++){for(var x=v[_],b=0;b<s.length;b++){var m=s[b];if(i=e.SAT.sat(new e.Vector2D(t.x,t.y),new e.Vector2D(n.x,n.y),x,m))break}if(i)break}}return i},n.isCollsionWithRect=function(e,t,n,i,a,r,s,o){return e>=a&&e>=a+s?!1:a>=e&&a>=e+n?!1:t>=r&&t>=r+o?!1:r>=t&&r>=t+i?!1:!0},n.checkCommonCollision=function(e,t){var n=e.collisionVectorData[0],i=t.collisionVectorData[0],a=n.concat().reverse(),r=i.concat().reverse(),s=a[1].x-a[0].x,o=a[2].y-a[1].y,l=r[1].x-r[0].x,c=r[2].y-r[1].y,h=new egret.Matrix;h.translate(a[0].x-e.anchorOffsetX,a[0].y-e.anchorOffsetY),h.scale(e.scaleX,e.scaleY);var u=e.x+h.tx,v=e.y+h.ty,f=new egret.Matrix;f.translate(r[0].x-t.anchorOffsetX,r[0].y-t.anchorOffsetY),f.scale(t.scaleX,t.scaleY);var g=t.x+f.tx,d=t.y+f.ty;return this.isCollsionWithRect(u,v,s*e.scaleX,o*e.scaleY,g,d,l*t.scaleX,c*t.scaleY)},n.checkDotCollisionDot=function(t,n){var i=t.collisionVectorData,a=n.collisionVectorData,r=t.angle*Math.PI/180,s=n.angle*Math.PI/180,o=new egret.Matrix;o.translate(i.x-t.anchorOffsetX,i.y-t.anchorOffsetY),o.scale(t.scaleX,t.scaleY),o.rotate(r);var l=new egret.Matrix;l.translate(a.x-n.anchorOffsetX,a.y-n.anchorOffsetY),l.scale(n.scaleX,n.scaleY),l.rotate(s);var c=new e.Vector2D(t.x+o.tx,t.y+o.ty),h=new e.Vector2D(n.x+l.tx,n.y+l.ty);return c.equals(h)},n.checkDotCollisionCircle=function(t,n){var i=t.collisionVectorData,a=n.collisionVectorData,r=t.angle*Math.PI/180,s=n.angle*Math.PI/180,o=new egret.Matrix;o.translate(i.x-t.anchorOffsetX,i.y-t.anchorOffsetY),o.scale(t.scaleX,t.scaleY),o.rotate(r);var l=new egret.Matrix;l.translate(a.center.x-n.anchorOffsetX,a.center.y-n.anchorOffsetY),l.scale(n.scaleX,n.scaleY),l.rotate(s);var c=new e.Vector2D(t.x+o.tx,t.y+o.ty),h=new e.Vector2D(n.x+l.tx,n.y+l.ty),u=c.distanceSQ(h),v=a.radius*n.scale;return v*v>=u},n.checkDotCollisionPolygon=function(t,n){var i=t.collisionVectorData,a=t.angle*Math.PI/180,r=n.angle*Math.PI/180,s=new egret.Matrix;s.translate(i.x-t.anchorOffsetX,i.y-t.anchorOffsetY),s.scale(t.scaleX,t.scaleY),s.rotate(a);var o=new e.Vector2D(t.x+s.tx,t.y+s.ty),l=n.collisionVectorData,c=!1,h=0;if(l){for(var u=0;u<l.length;u++){for(var v=l[u],f=0;f<v.length;f++){var g=v[f],d=(f+1)%v.length,p=new egret.Matrix;p.translate(g.x-n.anchorOffsetX,g.y-n.anchorOffsetY),p.scale(n.scaleX,n.scaleY),p.rotate(r);var y=new egret.Matrix;y.translate(v[d].x-n.anchorOffsetX,v[d].y-n.anchorOffsetY),y.scale(n.scaleX,n.scaleY),y.rotate(r);var _=new e.Vector2D(n.x+p.tx,n.y+p.ty),m=new e.Vector2D(n.x+y.tx,n.y+y.ty);if(_.y!=m.y&&!(o.y<(_.y<m.y?_.y:m.y)||o.y>=(_.y>m.y?_.y:m.y))){var b=(o.y-_.y)*(m.x-_.x)/(m.y-_.y)+_.x;b>o.x&&h++}}c=h%2==1}return c}return!1},n.checkCircleCollisionCircle=function(t,n){var i=t.collisionVectorData,a=n.collisionVectorData,r=t.angle*Math.PI/180,s=n.angle*Math.PI/180,o=new egret.Matrix;o.translate(i.center.x-t.anchorOffsetX,i.center.y-t.anchorOffsetY),o.scale(t.scaleX,t.scaleY),o.rotate(r);var l=new egret.Matrix;l.translate(a.center.x-n.anchorOffsetX,a.center.y-n.anchorOffsetY),l.scale(n.scaleX,n.scaleY),l.rotate(s);var c=new e.Vector2D(t.x+o.tx,t.y+o.ty),h=new e.Vector2D(n.x+l.tx,n.y+l.ty),u=c.distanceSQ(h),v=i.radius*t.scale,f=a.radius*n.scale;return(v+f)*(v+f)>=u},n.checkCircleCollisionPolygon=function(n,i){var a=n.collisionVectorData,r=n.angle*Math.PI/180,s=i.angle*Math.PI/180,o=a.radius*n.scale,l=!1,c=i.collisionVectorData,h=new egret.Matrix;h.translate(a.center.x-n.anchorOffsetX,a.center.y-n.anchorOffsetY),h.scale(n.scaleX,n.scaleY),h.rotate(r);var u=new e.Vector2D(n.x+h.tx,n.y+h.ty);if(c){for(var v=0;v<c.length;v++){for(var f=c[v],g=0;g<f.length;g++){var d=f[g],p=new egret.Matrix;p.translate(d.x-i.anchorOffsetX,d.y-i.anchorOffsetY),p.scale(i.scaleX,i.scaleY),p.rotate(s);var d=new e.Vector2D(p.tx+i.x,p.ty+i.y);if(u.distanceSQ(d)<=o*o){l=!0;break}var y=(g+1)%f.length,_=new egret.Matrix;_.translate(f[y].x-i.anchorOffsetX,f[y].y-i.anchorOffsetY),_.scale(i.scaleX,i.scaleY),_.rotate(s);var m=new e.Vector2D(i.x+p.tx,i.y+p.ty),b=new e.Vector2D(i.x+_.tx,i.y+_.ty),x=new t;if(x.center=new e.Vector2D(n.x+h.tx,n.y+h.ty),x.radius=a.radius*n.scale,this.circleCollisionLine(x,m,b)){l=!0;break}}if(l)break}return l}return!1},n.circleCollisionLine=function(e,t,n){var i=e.center.x-t.x,a=e.center.y-t.y,r=n.x-t.x,s=n.y-t.y,o=Math.sqrt(r*r+s*s);r/=o,s/=o;var l=i*r+a*s,c=0,h=0;return 0>=l?(c=t.x,h=t.y):l>=o?(c=n.x,h=n.y):(c=t.x+r*l,h=t.y+s*l),(e.center.x-c)*(e.center.x-c)+(e.center.y-h)*(e.center.y-h)<=e.radius*e.radius},n.pointToSegDist=function(e,t,n,i,a,r){var s=(a-n)*(e-n)+(r-i)*(t-i);if(0>=s)return Math.sqrt((e-n)*(e-n)+(t-i)*(t-i));var o=(a-n)*(a-n)+(r-i)*(r-i);if(s>=o)return Math.sqrt((e-a)*(e-a)+(t-r)*(t-r));var l=s/o,c=n+(a-n)*l,h=i+(r-i)*l;return Math.sqrt((e-c)*(e-c)+(h-i)*(h-i))},n.distFromPointToLine=function(e,t,n){var i=n.x-t.x,a=n.y-n.x,r=n.x*t.y-t.x*n.y;return Math.abs(i*e.x+a*e.y+r)/Math.sqrt(i*i+a*a)},n}();e.Collision=n,egret.registerClass(n,"ls.Collision")}(ls||(ls={}));var ls;!function(e){var t=function(){function e(e,t,n,i){}var t=(__define,e),n=t.prototype;return n.getTreeBoundInfo=function(e){},e}();e.QuadTree=t,egret.registerClass(t,"ls.QuadTree")}(ls||(ls={}));var ls;!function(e){var t=function(){function t(){this.intersectionIndex=-1,this.intersectionPoint=new e.Vector2D}var n=(__define,t),i=n.prototype;return i.getPrevIndex=function(e,t){return(e-1+t)%t},i.getNextIndex=function(e,t){return(e+1)%t},i.isConcavePoly=function(e){return e.length<=3?!1:this.getNextConcaveIndex(e,0)>=0},i.onSeparateConcavePoly=function(e){var t=[];return this.isAntiClockDir(e)||e.reverse(),this.separateConcavePoly(e,t,0),t},i.getNextConcaveIndex=function(e,t){if(void 0===t&&(t=0),e.length<=3)return-1;for(var n=e.length,i=n+t,a=t;i>a;a++){var r=this.getPrevIndex(a,n),s=this.getNextIndex(a,n),o=(a+n)%n,l=this.getMultiPtClockDir(e[o],e[r],e[s]);if(1==l)return a%n}return-1},i.getAllConvaveIndex=function(e,t){if(void 0===t&&(t=0),e.length<=3)return[];for(var n=[],i=e.length,a=i+t,r=t;a>r;r++){var s=this.getPrevIndex(r,i),o=this.getNextIndex(r,i),l=(r+i)%i,c=this.getMultiPtClockDir(e[l],e[s],e[o]);1==c&&n.push(r%i)}return n},i.separateConcavePoly=function(e,t,n){if(e.length<=3)return void t.push(e);var i=this.getNextConcaveIndex(e,n);if(n=i+1,0>i)return void t.push(e);if(this.getSplitPointByRgnBCinter(e,i)){var a=[],r=[];return this.splitPolyByIntersection(e,i,a,r),this.separateConcavePoly(a,t,n),void this.separateConcavePoly(r,t,n)}t.push(e)},i.splitPolyByIntersection=function(e,t,n,i){var a=e.length;if(0>t||t>=a)return!1;if(this.intersectionIndex<0||this.intersectionIndex>=a)return!1;if(t<=this.intersectionIndex+1)for(var r=this.intersectionIndex,a=t+a;a>=r;r++)n.push(e[r%a]);else for(var r=this.intersectionIndex;t>=r;r++)n.push(e[r]);if(t<=this.intersectionIndex)for(var r=t;r<this.intersectionIndex;r++)i.push(e[r]);else for(var r=t;r<this.intersectionIndex+a;r++)i.push(e[r%a]);return e[this.intersectionIndex].equals(this.intersectionPoint)||(n.push(this.intersectionPoint),i.push(this.intersectionPoint)),!0},i.getSplitPointByRgnBCinter=function(t,n){if(t.length<=3)return!1;for(var i=t.length,a=(n-1+i)%i,r=(n+1)%i,s=[],o=[],l=[],c=[],h=[],u=[],v=[],f=[],g=a>r?a:a+i,d=r;g>d;d++){var p=d%i,y=this.getMultiPtClockDir(t[n],t[a],t[p]),_=this.getMultiPtClockDir(t[n],t[r],t[p]);0>y&&_>0?s.push(p):y>=0&&_>=0?o.push(p):0>=y&&0>_?l.push(p):c.push(p)}if(h=this.getVisiblePtsOnRegion(t,n,s),u=o.concat(),f=c.concat(),v=this.getVisiblePtsOnRegion(t,n,l),h.length>0){var m=[],b=[];if(this.setSplitByRegion(t,h,m,b),b.length>0?this.intersectionIndex=this.getBestIntersectionPt(t,n,b):this.intersectionIndex=this.getBestIntersectionPt(t,n,m),this.intersectionIndex<0||this.intersectionIndex>=i)return!1}if(u.length<1||v.length<1)return console.error("BC分区为空错误！！"),!1;var x=u[u.length-1],E=v[0],C=new e.Vector2D(t[E].x-t[x].x,t[E].y-t[x].y),I=new e.Vector2D(t[n].x-t[a].x,t[n].y-t[a].y),S=new e.Vector2D(t[n].x-t[r].x,t[n].y-t[r].y),T=new e.Vector2D(I.x+S.x>>1,I.y+S.y>>1),D=new e.Vector2D;return 1!=this.getCrossByRadialAndSegment(t[n],T,t[x],C,D)?!1:(this.intersectionIndex=x,this.intersectionPoint=D,!0)},i.getMultiPtClockDir=function(e,t,n){var i=(e.x-t.x)*(n.y-e.y)-(n.x-e.x)*(e.y-t.y);return i>0?1:0>i?-1:0},i.getMultiPtClockDirByIndex=function(e,t){if(e.length<=2)return 0;var n=e[t%e.length],i=e[(t+e.length-1)%e.length],a=e[(t+1)%e.length];return this.getMultiPtClockDir(n,i,a)},i.isAntiClockDir=function(e){if(e.length<=2)return!0;for(var t=0,n=1,i=e.length;i>n;n++){var a=(n+1)%i,r=(n+2)%i,s=(e[a].x-e[n].x)*(e[r].y-e[a].y);s-=(e[a].y-e[n].y)*(e[r].x-e[a].x),0>s?t--:s>0&&t++}return 0>=t},i.isInsection=function(t,n,i,a){var r=new e.Vector2D(i.x-t.x,i.y-t.y),s=n.x*a.y-n.y*a.x,o=s*s,l=n.x*n.x+n.y*n.y,c=a.x*a.x+a.y*a.y;if(o>.01*l*c){var h=(r.x*a.y-r.y*a.x)/s;if(0>h||h>1)return 0;var u=(r.x*n.y-t.y*n.x)/s;return 0>u||u>1?0:1}return 0},i.isVisiblePtOnConcave=function(e,t,n){for(var i=0,a=e.length;a>i;i++){var r=(i+1)%a;if(i!=t&&i!=n&&r!=t&&r!=n&&this.isInsection(e[t],e[n],e[i],e[r]))return!1}return!0},i.getVisiblePtsOnRegion=function(e,t,n){for(var i=[],a=0,r=n.length;r>a;a++)this.isVisiblePtOnConcave(e,t,n[a])&&i.push(n[a]);return i},i.setSplitByRegion=function(e,t,n,i){for(var a=0,r=e.length;r>a;a++)this.getMultiPtClockDirByIndex(e,t[a])?n.push(t[a]):i.push(t[a])},i.dotProd=function(e,t){return e.dotProd(t)},i.getBestIntersectionPt=function(e,t,n){if(n.length<1)return-1;for(var i=e.length,a=(t-1+i)%i,r=(t+1)%i,s=e[t].clone().substruct(e[a].x,e[a].y).normalize(),o=(e[t].clone().substruct(e[r].x,e[r].y).normalize(),-1),l=-1,c=0,h=n.length;h>c;c++){var u=n[c],v=e[u],f=v.clone().substruct(e[t].x,e[t].y).normalize(),g=s.clone().dotProd(f);g>l&&(o=u)}return o},i.getCrossByRadialAndSegment=function(e,t,n,i,a){var r=n.clone().substruct(e.x,e.y),s=t.getCross(i);if(s*s>.01*t.lengthSQ*i.lengthSQ){var o=r.getCross(i)/s;if(0>o)return 0;var l=r.getCross(t)/s;if(0>l||l>1)return 0;var c=t.clone().scale(o);return a.x=e.x+c.x,a.y=e.y+c.y,1}return 0},i.getPosRelationToLine=function(e,t,n){return n.x*(t.y-e.y)+n.y*(e.x-t.x)+n.y*t.x-n.x*t.y},t}();e.IntersectionStruct=t,egret.registerClass(t,"ls.IntersectionStruct")}(ls||(ls={}));var ls;!function(e){var t=function(){function t(){}var n=(__define,t);n.prototype;return t.sat=function(e,t,n,i){return n.length<1||i.length<1?!1:this.convexsat(e,t,n,i)},t.convexsat=function(e,t,n,i){if(n.length<1||i.length<2)return!1;var a=[];a=this.getUniqueAxis(n,a),a=this.getUniqueAxis(i,a);for(var r=0,s=a.length;s>r;r++){var o=this.getProjection(e,n,a[r]),l=this.getProjection(t,i,a[r]);if(!this.overlap(o,l))return!1}return!0},t.getUniqueAxis=function(t,n){for(var i,a=!1,i=new e.Vector2D,r=0,s=t.length;s>r;r++){var i=t[(r+1)%s].clone().substruct(t[r].x,t[r].y).normalize().perp;i.x<=0&&(0==i.x?i.y<0&&(i.y*=-1):(i.x*=-1,i.y*=-1)),a=!0;for(var o=0,l=n.length;l>o;o++)if(n[o].equals(i)){a=!1;break}a&&n.push(i)}return n},t.overlap=function(e,t){return e.x>t.y?!1:e.y<t.x?!1:(e.x-t.x)*(t.x-t.y)<0?!0:!0},t.getPolyBound=function(e){if(e.length<1)return[0,0,0,0];for(var t=e[0],n=[t.x,t.y,t.x,t.y],i=0;i<e.length;i++){var a=e[i];a.x<n[0]&&(n[0]=a.x),a.y<n[1]&&(n[1]=a.y),a.x>n[2]&&(n[2]=a.x),a.y>n[3]&&(n[3]=a.y)}return n},t.getCircleBound=function(e){if(2!==e.length)return[0,0,0,0];var t=e[0],n=e[1];return[t.x-n.x,t.y-n.x,t.x+n.x,t.y+n.x]},t.getProjection=function(t,n,i){var a,r,s=0;r=new e.Vector2D(n[0].x+t.x,n[0].y+t.y).dotProd(i),s=r;for(var o=0;o<n.length;o++)a=new e.Vector2D(n[o].x+t.x,n[o].y+t.y).dotProd(i),r>a&&(r=a),a>s&&(s=a);return new e.Vector2D(r,s)},t}();e.SAT=t,egret.registerClass(t,"ls.SAT")}(ls||(ls={}));var ls;!function(e){var t=function(e){function t(){e.call(this),this.isTrigger=!1,this.isInvert=!1,this.operatorType=0}__extends(t,e);var n=__define,i=t,a=i.prototype;return n(a,"isFirstCondition",function(){return 0===this.index}),t}(e.BaseClass);e.Condition=t,egret.registerClass(t,"ls.Condition")}(ls||(ls={}));var ls;!function(e){var t=function(){function t(){this.loopDatas=[],this.loopLayers=0}var n=__define,i=t,a=i.prototype;return n(a,"loop",function(){if(null==this.conditions)return!1;for(var e=0;e<this.conditions.length;e++){var t=this.conditions[e];if(t.loop)return!0}return!1}),a.execActions=function(t){if(null!=this.actions){var n=[];for(var i in t){t[i];n.push(t[i])}this.lastActionResults=[];for(var a=0;a<this.actions.length;a++){var r=this.actions[a];r.lastSelectInstances=[]}if(this.loopDatas&&this.loopDatas.length>0)if(this.loopDatas.length>3)e.assert(!0,"不支持三层以上循环！！！");else{var s=this.loopDatas[0],o=this.loopDatas[1],l=this.loopDatas[2];if(s&&s instanceof e.ForEachOrderEvent&&(n=this.execForEach(s,n)),o&&o instanceof e.ForEachOrderEvent&&(n=this.execForEach(o,n)),l&&l instanceof e.ForEachOrderEvent&&(n=this.execForEach(l,n)),s&&s instanceof e.ForEvent)for(var c=+e.eval_e(s.startIndex),h=+e.eval_e(s.endIndex),u=s.name,a=c;c>=h?a>=h:h>=a;h>=c?a++:a--)if(e.loopIndex[u]=a,o&&o instanceof e.ForEvent)for(var v=+e.eval_e(o.startIndex),f=+e.eval_e(o.endIndex),g=o.name,d=v;v>=f?d>=f:f>=d;f>=v?d++:d--)if(e.loopIndex[g]=d,l&&l instanceof e.ForEvent)for(var p=+e.eval_e(l.startIndex),y=+e.eval_e(l.endIndex),_=l.name,m=p;p>=y?m>=y:y>=m;y>=p?m++:m--)e.loopIndex[_]=m,this.execLoopAction(!0,n);else this.execLoopAction(!0,n);else this.execLoopAction(!0,n);else if(s&&s instanceof e.OnForEachArrayElementEvent){var b=s,x=b.array;if(x){var E=e.eval_e(b.xyzDimention);switch(E){case 1:for(var a=0;a<x.width;a++)x.curX=a,this.execLoopAction(!0,n),x.curValue=x.at(a,0,0);break;case 2:for(var a=0;a<x.width;a++)for(var d=0;d<x.height;d++)x.curX=a,x.curY=d,this.execLoopAction(!0,n),x.curValue=x.at(a,d,0);break;case 3:for(var a=0;a<x.width;a++)for(var d=0;d<x.height;d++)for(var m=0;m<x.depth;m++)x.curX=a,x.curY=d,x.curZ=m,this.execLoopAction(!0,n),x.curValue=x.at(a,d,m);break;default:e.assert(!0,"无法解析当前数组维数："+E)}}}}else this.execLoopAction(!1,n)}},a.execForEach=function(t,n){var i=t.object,a=e.eval_e(t.order),r=e.World.getInstance().objectHash[i.name],s=[];if(r){for(var o=0;o<r.length;o++){var l=r[o];this.instancesStatus[l.u_id]&&this.instancesStatus[l.u_id].status&&s.push(l)}for(var c=-1,o=0;o<s.length;o++){var h=s[o].name;if(c=t.expression.indexOf(h),-1!=c)break}-1!=c&&s.sort(function(n,i){e.lakeshoreInst()[n.name]=n;var r=+e.eval_e(t.expression);r=r||0,e.lakeshoreInst()[i.name]=i;var s=+e.eval_e(t.expression);return s=s||0,0===a?r>s?1:s>r?-1:0:r>s?-1:s>r?1:0});for(var o=0;o<n.length;o++){var u=n[o];u.name==i.name&&n.splice(o,1)}n=n.concat(s)}return n},a.execLoopNextAction=function(t,n,i){if(this.event.execActionIndex++,!(this.event.execActionIndex>this.actions.length)){var a=e.World.getInstance(),r=t.callTarget,s=r.name,o=e.EventSheetDecoder.decodeActionParams(t).params,l=t.callHanlderName;if("wait"==l){var c=e.eval_e(o[0]);return"number"!=typeof c&&(c=0),void egret.setTimeout(function(e,t){this.execLoopNextAction(this.actions[this.event.execActionIndex],e,t)},this,1e3*c,n,i)}for(var h=[],u=0;u<o.length;u++){var v=o[u];if(v instanceof e.AIObject)for(var f=0;f<i.length;f++){var g=i[f];if(g.name==v.name){h.push(g);break}}}for(var u=0;u<h.length;u++){var d=h[u];e.lakeshoreInst()[d.name]=d}r instanceof e.BaseBehavior&&(s=t.targetName);var p=[];if(e.isSingleInst(s))p=[e.getInstanceByInstanceName(s)];else if(t.isFamily){for(var y=e.EventSheetDecoder.curFamilys[t.callTarget],u=0;u<i.length;u++){var g=i[u];e.lakeshoreInst()[g.name]=g;for(var _=0;_<y.insts.length;_++){var m=y.insts[_];m.name==g.name&&p.push(g)}}if(0===p.length)for(var b=0;b<y.insts.length;b++){var m=y.insts[b],x=a.objectHash[m.name];x=n?[x[0]]:x;for(var E=0;E<x.length;E++){var C=x[E];C.selfStatus&&p.push(C)}}}else{for(var u=0;u<i.length;u++){var g=i[u];e.lakeshoreInst()[g.name]=g,g.name==s&&p.push(g)}if(0===p.length&&!this.event.computeTargets[s]){var x=a.objectHash[s];if(x){x=n?[x[0]]:x;for(var u=0;u<x.length;u++){var C=x[u];C.selfStatus&&p.push(C)}}else console.error("没有查到目标【"+s+"】实例列表！！")}}var I=!1;if(this.lastActionResults&&this.lastActionResults.length>0){for(var u=0;u<p.length;u++)for(var S=p[u],f=0;f<this.lastActionResults.length;f++){var T=this.lastActionResults[f];if(S==T){I=!0;break}}I&&(p=this.lastActionResults)}if(p.length>0){var D=this.execSingleAction(t,p);D&&D.length>0&&(this.lastActionResults=D)}this.execLoopNextAction(this.actions[this.event.execActionIndex],n,i)}},a.execLoopAction=function(e,t){this.event.execActionIndex=0,this.actions.length>0&&this.execLoopNextAction(this.actions[this.event.execActionIndex],e,t)},a.execSingleAction=function(t,n){for(var i=t.callTarget,a=(i.name,t.callHanlderName),r=e.EventSheetDecoder.decodeActionParams(t),s=r.params,o=r.isFamilys,l=0;l<n.length;l++){var c=n[l];if(!c.isDead){var h;if(i instanceof e.BaseBehavior)for(var u=c.behaviors,v=0;v<u.length;v++){var f=u[v];if(f.name==i.name){h=f;break}}else h=c;var g=h[a];if(g){if(i instanceof e.AIObject&&"WebSocket"!=h.name&&(e.lakeshoreInst()[h.name]=h),r.hasFamily){for(var d=0;d<s.length;d++){var p=o[d];if(p){var y=s[d],_=e.EventSheetDecoder.curFamilys[y];s[d]=_.insts[Math.floor(_.insts.length*Math.random())]}}var m=g.apply(h,s)}else var m=g.apply(h,s);void 0!=m?t.lastSelectInstances=m:t.lastSelectInstances=[]}}}return t.lastSelectInstances},a.executeTrigger=function(t){for(var n=[],i=[],a=0;a<this.actions.length;a++){for(var r=this.actions[a],s=r.targetName,o=r.callTarget,l=!1,c=0;c<t.length;c++){var h=t[c];h.name==s&&(n.push([h,r]),l=!0)}l||i.push([h,r])}for(var a=0;a<n.length;a++){var u,v=n[a],h=v[0],r=v[1],s=r.targetName,o=r.callTarget,f=r.callHanlderName,g=e.EventSheetDecoder.decodeActionParams(r).params;u=o instanceof e.BaseBehavior?[o]:e.isSingleInst(s)?[e.getInstanceByInstanceName(s)]:[h];for(var c=0;c<u.length;c++){var d=u[c],p=d[f];p?p.apply(d,g):e.assert(!0,"当前实例"+d+"没有"+f+"方法！！")}}for(var a=0;a<i.length;a++){var u,v=i[a],h=v[0],r=v[1],s=r.targetName,o=r.callTarget,f=r.callHanlderName,g=e.EventSheetDecoder.decodeActionParams(r).params;u=o instanceof e.BaseBehavior?[o]:e.isSingleInst(s)?[e.getInstanceByInstanceName(s)]:e.World.getInstance().objectHash[s];for(var c=0;c<u.length;c++){var d=u[c],p=d[f];p?(e.lakeshoreInst()[d.name]=d,p.apply(d,g)):e.assert(!0,"当前实例"+d+"没有"+f+"方法！！")}}},t}();e.ConditionBlock=t,egret.registerClass(t,"ls.ConditionBlock")}(ls||(ls={}));var ls;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.sceneWidth=0,e.sceneHeight=0,e.version=0,e.isHasJpg=!1,e.isHasPng=!1,e}();e.Config=t,egret.registerClass(t,"ls.Config")}(ls||(ls={}));var ls;!function(e){var t=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseClass);e.BaseEvent=t,egret.registerClass(t,"ls.BaseEvent")}(ls||(ls={}));var ls;!function(e){var t=function(e){function t(){e.apply(this,arguments),this.index=0,this.execActionIndex=0,this.computeTargets={}}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.AIEvent=t,egret.registerClass(t,"ls.AIEvent")}(ls||(ls={}));var ls;!function(e){var t=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t.KEY_DOWN="keyDown",t.KEY_UP="keyUp",t}(egret.Event);e.KeyboardEvent=t,egret.registerClass(t,"ls.KeyboardEvent")}(ls||(ls={}));var ls;!function(e){var t=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnForEachArrayElementEvent=t,egret.registerClass(t,"ls.OnForEachArrayElementEvent")}(ls||(ls={}));var ls;!function(e){var t=function(e){function t(t,n,i,a,r){void 0===i&&(i=null),void 0===a&&(a=!1),void 0===r&&(r=!1),e.call(this,t,a,r),this.triggerTargets=[],this.triggerCondition=n,this.triggerData=i}__extends(t,e);var n=(__define,t);n.prototype;return t.TRIGGER="TRIGGER",t}(egret.Event);e.TriggerEvent=t,egret.registerClass(t,"ls.TriggerEvent")}(ls||(ls={}));var ls;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.EventSheetVo=t,egret.registerClass(t,"ls.EventSheetVo");var n=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.FamilyVo=n,egret.registerClass(n,"ls.FamilyVo");var i=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.VariableVo=i,egret.registerClass(i,"ls.VariableVo");var a=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.CollisionDataVo=a,egret.registerClass(a,"ls.CollisionDataVo");var r=function(){function e(){this.enemyNames=[]}var t=(__define,e);t.prototype;return e}();egret.registerClass(r,"CollisionSearchVo");var s=function(){function a(){}var s=__define,o=a;o.prototype;return a.saveEventSheetData=function(n){var i=e.Config.sceneInfo.eventsheetData;this.eventsheetVo=new t,this.eventsheetVo.eventSheetName=n,this.eventsheetVo.nextEventSheetName=i.$next,this.eventsheetVo.prevEventSheetName=i.$previous,this.eventsheetVo.layoutName=i.$layout;var a=i.$version;this.eventsheetVo.version=a?a:"1.1.1",this.eventSheets[n]=this.eventsheetVo},a.start=function(t){e.assert(null==t||""==t,t+" can not null!"),this.saveEventSheetData(t);var n=e.Config.sceneInfo.eventsheetData;e.assert(null==n,"can not find "+t),this.curSceneInstancesData=[],this.curSceneEventsData=[],this.curSceneAiObjects=[],this.curSceneAiObjectsHash={},this.curSceneEvents=[];e.World.getInstance().objectList;this.currentEventSheetName=t;var i=n.children;if(void 0!==i){for(var a=0,r=i.length;r>a;a++){var s=i[a],o=s.$type;switch(o){case"instance":e.LayoutDecoder.curSceneInstances[s.$UID]&&this.curSceneInstancesData.push(s);break;case"family":var l=this.decodeFamily(s);if(this.curFamilys[l.name]=l,l.insts&&l.behaviors)for(var c=0;c<l.insts.length;c++){var h=l.insts[c];if(h)for(var u=0;u<l.behaviors.length;u++){var v=l.behaviors[u],f=0==c?v:v.clone();h.addBehavior(f),f.onCreate(),f.isCreated=!0}}break;case"event":this.curSceneEventsData.push(s);break;case"variable":var g=this.decodeVaraible(s);if(void 0==e.AISystem.instance[g.name])switch(g.variableType){case"number":e.AISystem.instance[g.name]=+g.initValue;break;case"string":e.AISystem.instance[g.name]=g.initValue+"";break;case"any":e.AISystem.instance[g.name]=g.initValue;break;case"boolean":e.AISystem.instance[g.name]=Boolean(e.eval_e(g.initValue))}}}this.decode()}},a.decode=function(){this.decodePropertys(),this.decodeEvents(),this._oldTime=egret.getTimer(),e.AISystem.instance.sendSceneInitComplete(),this.decodeExpressions(),e.GameUILayer.stage.addEventListener(egret.Event.ENTER_FRAME,this.eventsheetRender,this),this.onInstancesCreate()},a.decodeExpressions=function(){},a.decodePropertys=function(){for(var t=0,n=this.curSceneInstancesData.length;n>t;t++){var i=this.curSceneInstancesData[t],a=(i.$type,+i.$UID),r=e.LayoutDecoder.curSceneInstances[a];if(null!=r){this.curSceneAiObjectsHash[r.name]=r,this.curSceneAiObjects.push(r);var s=i.children;if(s)for(var o=s.length,l=0;o>l;l++){var c=s[l];this.decodeInstancePropertie(c,r)}}else e.assert(!0,"EventSheetDecoder UID:"+a+" instance is null!")}},a.decodeFamily=function(t){var i=t.$UID,a=""==i?[]:i.split(","),r=new n;if(r.name=t.$target,r.UIDs=[],r.insts=[],a&&a.length)for(var s=0;s<a.length;s++)r.UIDs[s]=parseFloat(a[s]),r.insts[s]=e.LayoutDecoder.curSceneInstances[r.UIDs[s]];r.behaviors=[],r.variables=[];for(var o=t.children,s=0;s<o.length;s++){var l=o[s];switch(l.$name){case"behaviors":for(var c=l.children,h=0;h<c.length;h++){var u=this.decodeBehavior(c[h]);r.behaviors[h]=u}break;case"variables":for(var v=l.children,f=0;f<v.length;f++){var g=this.decodeVaraible(v[f]);r.variables[f]=g}}}if(r.insts&&r.variables)for(var s=0;s<r.insts.length;s++)for(var d=r.insts[s],p=0;p<r.variables.length;p++){var y=r.variables[p];switch(y.variableType){case"number":d[y.name]=+y.initValue;break;case"string":d[y.name]=y.initValue+"";break;case"any":d[y.name]=y.initValue;break;case"boolean":d[y.name]=Boolean(e.eval_e(y.initValue))}}return r},a.decodeVaraible=function(e){var t=new i;return t.initValue=decodeURIComponent(e.$initValue),t.variableType=e.$variableType,t.name=e.$variableName,t},a.decodeEvents=function(){for(var e=0;e<this.curSceneEventsData.length;e++){var t=this.curSceneEventsData[e],n=this.decodeEvent(t,e);n&&this.curSceneEvents.push(n)}},a.decodeEvent=function(t,n){var i=new e.AIEvent;i.index=n;var a=t.$conditionRelationShip;a&&(i.conditionRelationShip=e.eval_e(a));var r=t.$triggerOnceWhileTrue;r&&(i.triggerOnceWhileTrue=e.eval_e(r));var s=t.children;if(null!=s){for(var o,l=s.length,c=0,h=!1,u=0;l>u;u++)if("conditionBlock"===s[u].$type){h=!0;break}if(h)for(var v=0,f=0;l>f;f++){var g,d=s[f],p=d.$type;switch(p){case"conditionBlock":g=this.decodeConditionBlock(d.children,c,i),g.event=i,null==i.conditionBlocks&&(i.conditionBlocks=[]),i.conditionBlocks.push(g),0===c?o=g:(g.prevConditionBlock=o,o=g,g.prevConditionBlock.nextConditionBlock=g),c++;break;case"event":null==i.children&&(i.children=[]);var y=this.decodeEvent(d,v);y.parent=i,i.children.push(y),v++}}else{v=0;for(var _=[],f=0;l>f;f++){var d=s[f],p=d.$type;switch(p){case"condition":case"action":_.push(d);break;case"event":null==i.children&&(i.children=[]);var y=this.decodeEvent(d,v);y.parent=i,i.children.push(y),v++}}g=this.decodeConditionBlock(_,0,i),g.event=i,null==i.conditionBlocks&&(i.conditionBlocks=[]),i.conditionBlocks.push(g),0===c?o=g:(g.prevConditionBlock=o,o=g,g.prevConditionBlock.nextConditionBlock=g),c++}return i}},a.decodeInstancePropertie=function(t,n){var i=t.$type;switch(i){case"behavior":if(n.global)break;var a=this.decodeBehavior(t);n instanceof e.AIDisplayObject?n.addBehavior(a):e.assert(!0,n+"must instance of AIDisplayObject for have Behaviors"),a.onCreate(),a.isCreated=!0;break;case"variable":var r=t.$variableName,s=t.$variableType,o=decodeURIComponent(t.$initValue);switch(s){case"number":n.addVariable(r,+o);break;case"string":n.addVariable(r,o+"");break;case"any":n.addVariable(r,o);break;case"boolean":n.addVariable(r,Boolean(e.eval_e(o)))}}},a.decodeBehavior=function(t){var n=t.$behaviorType,i=e.getInstanceByPluginClassName(n);i.name=t.$name;var a=t.children;if(a)for(var r=a.length,s=0;r>s;s++){var o=a[s],l=o.$name,c=decodeURIComponent(o.$value),h=o.$valueDataType;switch(h){case"number":i[l]=+c;break;case"string":i[l]=c+"";break;case"any":i[l]=c;break;case"boolean":i[l]=Boolean(e.eval_e(c))}}return i},a.decodeConditionBlock=function(t,n,i){var a=t;if(a){var r=new e.ConditionBlock;r.index=n,r.conditions=[],r.actions=[];for(var s,o,l,c,h=a.length,u=0,v=0,f=0;h>f;f++){var g=a[f],d=g.$type;switch(d){case"condition":var p=this.decodeCondition(g,u,i);p.conditionBlock=r,p.event=i,void 0==p.callCondition&&(p.isFamily?e.assert(!0,"目标组没有"+p.callConditionName+"方法！！！"):e.assert(!0,"目标："+p.callTarget+"没有"+p.callConditionName+"方法！！！")),r.conditions.push(p),0===u?o=s=p:(p.prevCondition=o,o=p,p.prevCondition.nextCondition=p),u++;break;case"action":var y=this.decodeAction(g,v,i);y.conditionBlock=r,y.event=i,r.actions.push(y),0===v?c=l=y:(y.prevAction=c,c=y,y.prevAction.nextAction=y),v++}}return r}return null},a.decodeConditionProperties=function(t,n){var i=n.children;if(i)for(var a=i.length,r=0;a>r;r++){var s=i[r],o=s.$valueDataType,l=s.$name,c=s.$value,h=s.$variable?"true"===s.$variable:!1,u=s.$isFamily?"true"===s.$isFamily:!1;switch(t.isFamily=u,o){case"number":t[l]=+c;break;case"string":var v=decodeURIComponent(c+"");v=h?v:e.getTransformationStr(v),h?t[l]=v:t[l]=e.eval_e(v);break;case"any":t[l]=h?decodeURIComponent(s.$value):e.getTransformationStr(decodeURIComponent(s.$value));break;case"boolean":t[l]=Boolean(e.eval_e(c))}}return t},a.decodeConditionFamilyProperties=function(e,t){var n=[],i=t.children;if(i)for(var a=i.length,r=0;a>r;r++){var s=i[r],o=s.$isFamily?"true"===s.$isFamily:!1;if(o)for(var l=s.$value,c=this.curFamilys[l],h=c.insts,u=0;u<h.length;u++)-1==n.indexOf(h[u].name)&&n.push(h[u].name)}return n},a.decodeCondition=function(t,n,i){var a=t.$target,s=t.$behaviorName,o=e.getInstanceByPluginClassName(t.$paramsClass),l=t.$callName,c=!1;t.$invert&&(c="true"===t.$invert);var h=!1;t.$loop&&(h="true"===t.$loop);var u=new e.Condition;if(u.index=n,u.firstCondition=0==n?u:null,u.targetName=a,u.paramClassName=t.$paramsClass,u.isInvert=c,u.paramsInstance=o,u.callConditionName=l,u.isFamily="true"==t.$family,u.event=i,1===e.Version.compareVersion(this.eventsheetVo.version,"1.1.1")){var v=0;t.$operatorType&&(v=+t.$operatorType),u.operatorType=v}else u.operatorType=+!i.conditionRelationShip;if(o&&(o.data=t,u.isTrigger=Boolean(e.eval_e(t.$isTrigger)),u.isTrigger&&this.triggerConditions.push(u)),"onCollisionWithOtherObject"==l){var f=t.children;if(f){var g=f[0].$value,d=e.eval_e(e.getTransformationStr(g));if(u.isFamily){var p=this.curFamilys[a];if(p.insts&&p.insts.length>0)for(var y=0;y<p.insts.length;y++){var _=p.insts[y];if(null==this.collisionSearchs[_.name]){var m=new r;m.owerName=_.name,d instanceof e.AIDisplayObject&&m.enemyNames.push(g),this.collisionSearchs[_.name]=m
}else m=this.collisionSearchs[_.name],d instanceof e.AIDisplayObject&&m.enemyNames.push(g)}}else{var b=this.decodeConditionFamilyProperties(u.paramsInstance,t);if(null==this.collisionSearchs[a]){var m=new r;m.owerName=a,this.collisionSearchs[a]=m}else m=this.collisionSearchs[a];if(b.length>0)for(var x=0;x<b.length;x++)m.enemyNames.push(b[x]);else d instanceof e.AIDisplayObject&&m.enemyNames.push(g)}}}if("onCollisionWithOtherObject"==l){var f=t.children;if(f){var E=i.index+"_"+u.index;if(null==this.collisionSearchs2[E]){var g=f[0].$value;this.collisionSearchs2[E]=[a,g]}}}if(e.isSingleInst(a))u.callTarget=e.getInstanceByInstanceName(a),u.callCondition=u.callTarget[l];else{if(u.isFamily){var C=null,p=this.curFamilys[a],I=p.insts;void 0==I&&alert("当前场景中没有"+a+"的组！！！");for(var S=0;S<I.length;S++){var T=I[S],D=e.World.getInstance().objectHash[T.name][0];if(null!=s&&""!=s){if(D){for(var O,w=p.behaviors,M=0,A=w.length;A>M;M++){var B=w[M];if(B.name==s){O=B;break}}C=null==O?D:O}}else C=[],C.push(D)}u.callTarget=C,void 0==C[0]?u.callCondition=C[l]:u.callCondition=C[0][l]}else{var C=null;void 0==e.World.getInstance().objectHash[a]&&alert("当前场景中没有"+a+"实例对象！！！");var D=e.World.getInstance().objectHash[a][0];if(null!=s&&""!=s){if(D){for(var w=D.behaviors,M=0,A=w.length;A>M;M++){var B=w[M];if(B.name==s){C=B;break}}C=null==C?D:C}}else C=D;u.callTarget=C,u.callCondition=u.callTarget[l]}void 0===u.callCondition&&e.assert(!0,"条件目标:"+u.targetName+",没有调用的方法名："+l)}return u},a.decodeAction=function(t,n,i){var a,r=t.$target,s=t.$behaviorName,o=t.$callName,l="true"==t.$family;if(e.isSingleInst(r))a=e.getInstanceByInstanceName(r);else if(this.curSceneAiObjects)for(var c=0,h=this.curSceneAiObjects.length;h>c;c++)if(this.curSceneAiObjects[c].name==r){a=this.curSceneAiObjects[c];var u;if(null!=s&&""!=s&&a){var v=a.behaviors;if(v){for(var f=0,g=v.length;g>f;f++){var d=v[f];if(d.name==s){u=d;break}}a=u}}break}void 0==a&&(a=e.eval_e(r));var p=new e.Action;return p.index=n,p.targetName=r,p.isFamily=l,p.callTarget=a,p.paramData=t.children,p.callHanlderName=o,p},a.decodeActionParams=function(t){var n={},i=[],a=t.paramData,r=[],s=!1;if(a&&a.length)for(var o=0,l=a.length;l>o;o++){var c=a[o],h=c.$valueDataType,u=(c.$name,decodeURIComponent(c.$value)),v=c.$variable?"true"===c.$variable:!1,f=c.$isFamily?"true"===c.$isFamily:!1;f&&(s=!0);var g;switch(h){case"number":g=+u;break;case"string":u=v?u:e.getTransformationStr(u),g=v?u:e.eval_e(u+"");break;case"any":g=v?u:e.getTransformationStr(u);break;case"boolean":g=Boolean(e.eval_e(u))}r[o]=f,i.push(g)}return n.params=i,n.isFamilys=r,n.hasFamily=s,n},s(a,"tickInterval",function(){return this._tickInterval}),a.eventsheetRender=function(e){var t=egret.getTimer();this._tick=t-this._oldTime,this._tickInterval=1e3/this._tick,this._oldTime=t,this.renderCamera(),this.renderEvents(),this.renderBehaviors(),this.checkCollistions(),null!=this.onEventSheetTick&&this.onEventSheetTick()},a.renderCamera=function(){e.World.getInstance().render()},a.onInstancesCreate=function(){for(var t in e.LayoutDecoder.curSceneInstances)e.LayoutDecoder.curSceneInstances[t]instanceof e.AIDisplayObject&&e.LayoutDecoder.curSceneInstances[t].onCreate()},a.renderBehaviors=function(){for(var t=e.World.getInstance().objectList,n=0;n<t.length;n++){var i=t[n];if(i){i.onTick();var a=i.behaviors;if(a)for(var r=0;r<a.length;r++){var s=a[r];s.enabled&&s.inst&&!(0===s.inst.dt||s.inst.dt>1e6)&&s.tick()}}}},a.renderEvents=function(){for(var t=e.AISystem.instance.disableDataEvents,n=0;n<this.curSceneEvents.length;n++)void 0==t[n+1]&&this.execEvent(this.curSceneEvents[n],!1)},a.execEvent=function(t,n,i,a,r,s){void 0===i&&(i=null),void 0===a&&(a=null),void 0===r&&(r=null),void 0===s&&(s=null),t.computeTargets={};var o=t.conditionBlocks;if(o){for(var l=0;l<o.length;l++){var c=o[l];c.currentConditionStatus=[],c.results=[],c.loopLayers=0;for(var h=0;h<c.conditions.length;h++){var u=c.conditions[h];u.conditionInstances={},u.instanceTypeStatus={},u.statusInfo=null}}for(var v=e.World.getInstance().objectList,l=0,f=v.length;f>l;l++){var g=v[l];g.currentStatus=!0,g.selfStatus=!0}for(var d=!1,l=0;l<o.length;l++){var c=o[l],p=c.conditions;if(p)for(var h=0;h<p.length;h++){var u=p[h],y=u.targetName,_=u.isFamily,m=u.callTarget,b=u.callCondition,x=(u.callConditionName,u.isInvert),E=(u.paramClassName,u.paramsInstance),C=(u.isTrigger,!1);d=!0;var I;if(_)if(u.isTrigger&&n)I=i;else{var S=this.curFamilys[y].insts;S&&S.length&&(I=S)}else I=e.isSingleInst(y)?[e.getInstanceByInstanceName(y)]:n&&u.isTrigger?i:e.World.getInstance().objectHash[y];if(!C){for(var T=0;T<I.length;T++){var g=I[T];if(!g.isDead){var D,O;if(m instanceof e.BaseBehavior){var w;if(_?s&&(w=s.behaviors):w=g.behaviors,w)for(var M=0;M<w.length;M++){var A=w[M];if(A.name==m.name){D=A;break}}}this.decodeConditionProperties(E,E.data);var B=E;if(u.isTrigger){if(!n){C=!0;break}O=b.apply(D?D:g,[B])}else O=b.apply(D?D:g,[B]),u.isTrigger&&(O.status=!1);O.status=x?!O.status:O.status;var k=O.status;if(O.instances){for(var L={},R=0;R<O.instances.length;R++){var P=O.instances[R];null==t.computeTargets[P.name]&&(t.computeTargets[P.name]=P.name),n&&u.isTrigger?u==r&&(P.selfStatus=k):P.selfStatus=k,L[P.u_id]=P,null==u.instanceTypeStatus[P.name]?u.instanceTypeStatus[P.name]={instances:[P],status:k}:(u.instanceTypeStatus[P.name].status=u.instanceTypeStatus[P.name].status||k,u.instanceTypeStatus[P.name].instances.push(P))}var N=e.World.getInstance().objectHash[P.name];if(N)for(var j=0;j<N.length;j++){var V=N[j];null==L[V.u_id]&&(V.selfStatus=!1)}}var U=O.data;U&&(O.data instanceof e.ForEvent||O.data instanceof e.ForEachOrderEvent||O.data instanceof e.OnForEachArrayElementEvent)&&(c.loopDatas[c.loopLayers++]=U),null==c.results&&(c.results=[]),null==c.results[u.index]&&(c.results[u.index]={}),null==u.statusInfo&&(u.statusInfo={}),u.statusInfo[g.u_id]={instance:g,condition:u,status:k},null==u.conditionInstances&&(u.conditionInstances={}),null==u.conditionInstances[g.u_id]&&(u.conditionInstances[g.u_id]=g)}}var X=!1;for(var Y in u.instanceTypeStatus){X=u.instanceTypeStatus[Y].status;break}0===h?u.currentStatus=X:1===u.operatorType?u.currentStatus=u.prevCondition.currentStatus||X:u.currentStatus=u.prevCondition.currentStatus&&X,c.currentConditionStatus[u.index]=u.currentStatus}}if(0!==c.conditions.length){var G={},$=!1;if(c.status=c.conditions[c.conditions.length-1].currentStatus,c.status){if(c.event.triggerOnceWhileTrue){var F=this.curSceneEvents.indexOf(c.event);-1!=F&&this.curSceneEvents.splice(F,1)}c.instancesStatus={};for(var W=0;W<c.conditions.length;W++){var u=c.conditions[W];if(u.currentStatus&&u.instanceTypeStatus){var H=u.statusInfo;for(var q in H){var z=H[q],J=z.status;void 0==c.instancesStatus[q]?c.instancesStatus[q]={instance:z.instance,status:z.status}:u.prevCondition&&(0==u.prevCondition.operatorType?c.instancesStatus[q].status=c.instancesStatus[q].status&&J:c.instancesStatus[q].status=c.instancesStatus[q].status||J)}}}var Q=c.instancesStatus;if(Q)for(var K in Q)Q[K].status&&void 0==G[K]&&(G[K]=Q[K].instance),$=!0;if($){if(t.lastFilterTargets)for(var Z in t.lastFilterTargets)G[Z]=t.lastFilterTargets[Z];if(c.execActions(G),t.children)for(var M=0;M<t.children.length;M++){var et=t.children[M];et&&(et.lastFilterTargets=G,this.execEvent(et,!1))}}}}}}},a.checkCollistions2=function(){var t=e.World.getInstance(),n=(t.objectList,t.objectHash);for(var i in this.collisionSearchs2){var a=this.collisionSearchs2[i],r=n[a[0]],s=n[a[1]];if(r&&s)for(var o=0;o<r.length;o++){var l=r[o];if(l)for(var c=0;c<s.length;c++){var h=s[c];if(h){var u=e.Collision.checkCollision(l,h);l.setIsColliding(u,h),h.setIsColliding(u,l)}}}}},a.checkCollistions=function(){var t=e.World.getInstance(),n=t.objectList,i={};for(var a in this.collisionSearchs){var r=this.collisionSearchs[a],s=t.objectHash[r.owerName];for(var o in s){var l=s[o];if(l.container.stage&&!l.isDead&&l.collision)for(var c=0;c<r.enemyNames.length;c++){var h=r.enemyNames[c],u=t.objectHash[h];for(var v in u){var f=u[v];if(f.container.stage&&f.collision&&!f.isDead){var g=e.Collision.checkCollision(l,f);g&&(null==i[l.u_id]&&(i[l.u_id]=[l,f]),null==i[f.u_id]&&(i[f.u_id]=[f,l]))}}}}}for(var d={},p=0;p<n.length;p++)if(n[p]instanceof e.AIDisplayObject){var y=n[p],_=i[y.u_id];if(null!=_){var m=_[1],b=0;null==d[y.u_id]&&(b++,d[y.u_id]=y),null==d[m.u_id]&&(b++,d[m.u_id]=m),2!=b&&y.setIsColliding(!0,m)}else y.setIsColliding(!1,null)}},a.execScenePauseOrPlay=function(t){0==t?e.StartUp.stage.frameRate=.001:e.StartUp.stage.frameRate=60},a.destory=function(){this.curSceneInstancesData=[],this.curSceneEventsData=[],this.curSceneAiObjects=[],this.curSceneAiObjectsHash={},this.curSceneEvents=[],this.triggerConditions=[],this.curFamilys={},e.AISystem.instance.disableDataEvents={},e.GameUILayer.stage.removeEventListener(egret.Event.ENTER_FRAME,this.eventsheetRender,this)},a.curSceneInstancesData=[],a.curSceneEventsData=[],a.curSceneAiObjects=[],a.curSceneAiObjectsHash={},a.curSceneEvents=[],a.curFamilys={},a.eventSheets={},a.collisionSearchs={},a.collisionSearchs2={},a._oldTime=0,a._tickInterval=16.6,a._tick=60,a.testShape=new egret.Sprite,a.triggerConditions=[],a}();e.EventSheetDecoder=s,egret.registerClass(s,"ls.EventSheetDecoder")}(ls||(ls={}));var ls;!function(ls){function assert(e,t){if(e){var n;try{throw Error()}catch(i){n=i.stack}var t="【ERROR】:"+t+"\n\nStack trace: \n"+n;console.error&&console.error(t),isWeixinLogin()&&(document.write(t),alert(t))}}function registerObject(e,t){window[e]=t}function lakeshoreInst(){return window}function eval_e(exp){try{return eval(exp)}catch(exception){return exp}}function getloopIndex(e){return ls.loopIndex[e]}function fps(){return 1e3/ls.EventSheetDecoder.tickInterval}function dt(){return ls.EventSheetDecoder.tickInterval}function objectcount(){return ls.World.getInstance().objectList.length}function timeScale(){return 1}function time(){return egret.getTimer()-ls.oldtime}function isPc(){for(var e=navigator.userAgent,t=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!0,i=0;i<t.length;i++)if(e.indexOf(t[i])>0){n=!1;break}return n}function injectProp(e,t,n){if(void 0===t&&(t=null),void 0===n&&(n=!0),!t)return!1;var i=!0;for(var a in t){var r=t[a];n&&"function"==typeof r||(e[a]=r)}return i}function getMiniSeconds(e){var t=/-/g,n=new Date(Date.parse(e.replace(t,"/")));return n.getTime()}function getRemainTimeStr(e,t,n){void 0===t&&(t=":"),void 0===n&&(n=!0);var i=this.getMiniSeconds(e),a=(new Date).getTime(),r=i-a;if(r>=0){var s=Math.round(r/1e3),o=Math.floor(s/3600),l=Math.floor((s-3600*o)/60),c=s-3600*o-60*l,h=10>o?"0"+o:o.toString(),u=10>l?"0"+l:l.toString(),v=10>c?"0"+c:c.toString();return h+t+u+t+v}return n?"00"+t+"00"+t+"00":""}function isInternal(e){if(ls.internalData)for(var t=0;t<ls.internalData.length;t++){var n=ls.internalData[t];if(n.name==e)return!0}return!1}function getPlugin(e){if(ls.internalData)for(var t=0;t<ls.internalData.length;t++){var n=ls.internalData[t];if(n.name==e)return n.plugin}return""}function isSingleInst(e){return isInternal(e)}function getInstanceByInstanceName(e){var t,n;if(isSingleInst(e)){if(null==ls.singles[e]){if(n=egret.getDefinitionByName("ls."+getPlugin(e)),null==n)return void alert("name:"+e);n.name=e,t=null==n.instance?new n:n.instance,ls.singles[e]=t,registerObject(e,t)}else t=ls.singles[e];isInternal(e)&&(window[e]=t)}return t}function getInstanceByPluginClassName(e,t){void 0===t&&(t=!1);var n,i;if("Object"==e)return null;if(isSingleInst(e))if(null==ls.singles[e]){if(i=egret.getDefinitionByName("ls."+getPlugin(e)),null==i)return void(t||alert("name:"+e));i.name=e,n="System"==e?i.instance:new i,n.name=e,ls.singles[e]=n,registerObject(e,n)}else n=ls.singles[e];else{if(i=egret.getDefinitionByName("ls."+e),null==i)return t||alert("name:"+e),void(n=null);n=new i}return isInternal(e)&&(window[e]=n),n}function getTexture(e){if(e){var t,n=e;if(n){var i=ls.LayoutDecoder.spriteSheetDatas[n];if(i&&(t=i.texture),(void 0==t||null==t)&&(t=RES.getRes(n)),void 0!=t&&null!=t)return[t,i?i.offsetX:0,i?i.offsetY:0]}}return null}function getName(e){return e?e.substring(e.lastIndexOf("/")+1,e.lastIndexOf(".")):""}function getTransformationStr(e){return e}function round6dp(e){return Math.round(1e6*e)/1e6}function is_undefined(e){return"undefined"==typeof e}function is_number(e){return"number"==typeof e}function is_string(e){return"string"==typeof e}function abs(e){return e=eval_e(e),Math.abs(e)}function acos(e){return e=eval_e(e),Math.acos(e)}function angle(e,t,n,i){return e=eval_e(e),t=eval_e(t),n=eval_e(n),i=eval_e(i),180*Math.atan2(i-t,n-e)/Math.PI}function asin(e){return e=eval_e(e),Math.asin(e)}function atan(e){return e=eval_e(e),Math.atan(e)}function atan2(e,t){return e=eval_e(e),t=eval_e(t),Math.atan2(e,t)}function ceil(e){return e=eval_e(e),Math.ceil(e)}function floor(e){return e=eval_e(e),Math.floor(e)}function sin(e){return e=eval_e(e),Math.sin(e)}function cos(e){return e=eval_e(e),Math.cos(e)}function sqrt(e){return e=eval_e(e),Math.sqrt(e)}function tan(e){return e=eval_e(e),Math.tan(e)}function cosp(e,t,n){return e=eval_e(e),t=eval_e(t),n=eval_e(n),(e+t+(e-t)*Math.cos(n*Math.PI))/2}function distance(e,t,n,i){e=eval_e(e),t=eval_e(t),n=eval_e(n),i=eval_e(i);var a=e-n,r=t-i;return Math.sqrt(a*a+r*r)}function exp(e){return e=eval_e(e),Math.exp(e)}function pow(e,t){return e=eval_e(e),t=eval_e(t),Math.pow(e,t)}function getbit(e,t){return e=eval_e(e),t=eval_e(t),e=0|e,t=0|t,e&1<<t?1:0}function lerp(e,t,n){return e=eval_e(e),t=eval_e(t),n=eval_e(n),e+(t-e)*n}function unlerp(e,t,n){return e=eval_e(e),t=eval_e(t),n=eval_e(n),e==t?0:(n-e)/(t-e)}function log10(e){return e=eval_e(e),Math.log(e)/Math.LN10}function max(e,t){return e=eval_e(e),t=eval_e(t),Math.max(e,t)}function min(e,t){return e=eval_e(e),t=eval_e(t),Math.min(e,t)}function pi(){return Math.PI}function qarp(e,t,n,i){return e=eval_e(e),t=eval_e(t),n=eval_e(n),i=eval_e(i),lerp(lerp(e,t,i),lerp(t,n,i),i)}function round(e){return e=eval_e(e),Math.round(e)}function random(){return Math.random()}function togglebit(e,t){return e=eval_e(e),t=eval_e(t),e=0|e,t=0|t,e^1<<t}function float(e){return e=eval_e(e),+e}function int(e){return e=eval_e(e),parseInt(e)}function rgb(e,t,n){return e=eval_e(e),t=eval_e(t),n=eval_e(n),Math.max(Math.min(e,255),0)|Math.max(Math.min(t,255),0)<<8|Math.max(Math.min(n,255),0)<<16}function getRed(e){return e=eval_e(e),255&e}function getGreen(e){return e=eval_e(e),(65280&e)>>8}function getBlue(e){return e=eval_e(e),(16711680&e)>>16}function regexp_escape(e){return e=eval_e(e),e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}function find(e,t){return e=eval_e(e),t=eval_e(t),e.search(new RegExp(regexp_escape(t),"i"))}function replace(e,t,n){return e=eval_e(e),t=eval_e(t),n=eval_e(n),e.replace(new RegExp(regexp_escape(t),"gi"),n)}function left(e,t){return e=eval_e(e),t=eval_e(t),e.substr(e,t)}function right(e,t){return e=eval_e(e),e.substr(e.length-t)}function lowercase(e){return e=eval_e(e),e.toLowerCase()}function upppercase(e){return e=eval_e(e),e.toUpperCase()}function trim(e){return e=eval_e(e),e.trim()}function mid(e,t,n){return e=eval_e(e),e.substr(t,n)}function newline(){return"\n"}function zeropad(e,t){e=eval_e(e),t=eval_e(t);var n=0>e?"-":"";0>e&&(e=-e);for(var i=t-e.toString().length,a=0;i>a;a++)n+="0";return n+e.toString()}function choose(){var e=Math.floor(Math.random()*(arguments.length-1));return arguments[e+1]}function clamp(e,t,n){return e=eval_e(e),t=eval_e(t),n=eval_e(n),t>e?t:e>n?n:e}function isWeixinLogin(){var e=window.navigator.userAgent.toLowerCase(),t=e.match(/MicroMessenger/i);return t&&t.length>0&&"micromessenger"==t[0]}function compare(e,t,n){var i=eval_e(e),a=eval_e(n);switch(t){case OperationType.EQUAL_TO:return i==a;case OperationType.GREATER_OR_EQUAL:return i>=a;case OperationType.GREATER_THAN:return i>a;case OperationType.LESS_OR_EQUAL:return a>=i;case OperationType.LESS_THAN:return a>i;case OperationType.NOT_EQUAL_TO:return i!=a}return!1}ls.loopIndex={},ls.assert=assert,ls.registerObject=registerObject,ls.lakeshoreInst=lakeshoreInst,ls.eval_e=eval_e,ls.getloopIndex=getloopIndex,ls.fps=fps,ls.dt=dt,ls.objectcount=objectcount,ls.timeScale=timeScale,ls.oldtime=egret.getTimer(),ls.time=time,ls.isPc=isPc,ls.injectProp=injectProp,ls.getMiniSeconds=getMiniSeconds,ls.getRemainTimeStr=getRemainTimeStr,ls.internalData=[],ls.isInternal=isInternal,ls.getPlugin=getPlugin,ls.isSingleInst=isSingleInst,ls.singles={},ls.getInstanceByInstanceName=getInstanceByInstanceName,ls.getInstanceByPluginClassName=getInstanceByPluginClassName,ls.getTexture=getTexture,ls.getName=getName,ls.getTransformationStr=getTransformationStr,ls.round6dp=round6dp,ls.is_undefined=is_undefined,ls.is_number=is_number,ls.is_string=is_string,ls.abs=abs,ls.acos=acos,ls.angle=angle,ls.asin=asin,ls.atan=atan,ls.atan2=atan2,ls.ceil=ceil,ls.floor=floor,ls.sin=sin,ls.cos=cos,ls.sqrt=sqrt,ls.tan=tan,ls.cosp=cosp,ls.distance=distance,ls.exp=exp,ls.pow=pow,ls.getbit=getbit,ls.lerp=lerp,ls.unlerp=unlerp,ls.log10=log10,ls.max=max,ls.min=min,ls.pi=pi,ls.qarp=qarp,ls.round=round,ls.random=random,ls.togglebit=togglebit,ls["float"]=float,ls["int"]=int,ls.rgb=rgb,ls.getRed=getRed,ls.getGreen=getGreen,ls.getBlue=getBlue,ls.regexp_escape=regexp_escape,ls.find=find,ls.replace=replace,ls.left=left,ls.right=right,ls.lowercase=lowercase,ls.upppercase=upppercase,ls.trim=trim,ls.mid=mid,ls.newline=newline,ls.zeropad=zeropad,ls.choose=choose,ls.clamp=clamp,ls.isWeixinLogin=isWeixinLogin;var OperationType=function(){function e(){}var t=(__define,e);t.prototype;return e.EQUAL_TO="equalTo",e.NOT_EQUAL_TO="notEqualTo",e.LESS_THAN="lessThan",e.LESS_OR_EQUAL="lessOrEqual",e.GREATER_THAN="greaterThan",e.GREATER_OR_EQUAL="greaterOrEqual",e}();ls.OperationType=OperationType,egret.registerClass(OperationType,"ls.OperationType");var InstanceVariablesType=function(){function e(){}var t=(__define,e);t.prototype;return e.TEXT="text",e.INT="int",e.NUMBER="Number",e.BOOLEAN="boolean",e}();ls.InstanceVariablesType=InstanceVariablesType,egret.registerClass(InstanceVariablesType,"ls.InstanceVariablesType"),ls.compare=compare}(ls||(ls={}));var ls;!function(e){var t=function(){function t(){}var n=(__define,t);n.prototype;return t.getLayerByIndex=function(t,n){var i=this.layers[n];if(null==i){i=new egret.Sprite,i.layerIndex=n,this.layers.push(i),this.layers.sort(function(e,t){return e.layerIndex>t.layerIndex?1:e.layerIndex<t.layerIndex?-1:0});var a=e.LayoutDecoder.layers[n];i.scaleX=a.layerScaleX/100,i.scaleY=a.layerScaleY/100,i.alpha=a.layerAlpha,i.visible=a.layerVisible;for(var r=0,s=this.layers.length;s>r;r++)i=this.layers[r],e.GameUILayer.renderContainer.addChild(i)}return i},t.getIndexByLayer=function(e){return e?this.layers.indexOf(e):-1},t.getLayer=function(e){for(var t=0;t<this.layers.length;t++){var n=this.layers[t];if(n.layerIndex==e)return n}return null},t.layers=[],t}();e.LayerManager=t,egret.registerClass(t,"ls.LayerManager")}(ls||(ls={}));var ls;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.LayerVo=t,egret.registerClass(t,"ls.LayerVo")}(ls||(ls={}));var ls;!function(e){var t=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._x=e,this._y=t}var t=__define,n=e,i=n.prototype;return t(i,"x",function(){return this._x},function(e){this._x=e}),t(i,"y",function(){return this._y},function(e){this._y=e}),t(i,"length",function(){return Math.sqrt(this._x*this._x+this._y*this._y)},function(e){var t=this.angle;this._x=Math.cos(t)*e,this._y=Math.sin(t)*e}),t(i,"lengthSQ",function(){return this._x*this._x+this._y*this._y}),t(i,"angle",function(){return Math.atan2(this._y,this._x)},function(e){var t=this.length;this._x=Math.cos(e)*t,this._y=Math.sin(e)*t}),t(i,"rotation",void 0,function(e){var t=e/180*Math.PI;this.angle=t}),i.normalize=function(){var e=this.length;return e?(this.x/=e,this.y/=e,this):this},i.truncate=function(e){return this.length=Math.min(e,this.length),this},i.reverse=function(){return this._x=-this._x,this._y=-this._y,this},i.isNormalized=function(){return 1==this.length},i.dotProd=function(e){return this._x*e._x+this._y*e._y},i.crossProd=function(e){return 0===this.getCross(e)},i.getCross=function(e){return this._x*e._y-this._y*e._x},e.angleBetween=function(e,t){return e.isNormalized()||(e=e.clone().normalize()),t.normalize()||(t=t.clone().normalize()),Math.acos(e.dotProd(t))},t(i,"perp",function(){return new e(-this._y,this._x)}),i.sign=function(e){return this.perp.dotProd(e)<0?-1:1},i.distance=function(e){return Math.sqrt(this.distanceSQ(e))},i.distanceSQ=function(e){var t=e._x-this._x,n=e._y-this._y;return t*t+n*n},i.equals=function(e){return this._x===e._x&&this._y===e._y},i.isZero=function(){return 0===this._x&&0===this._y},i.scale=function(e){return this._x*=e,this._y*=e,this},i.add=function(e,t){return this._x+=e,this._y+=t,this},i.substruct=function(e,t){return this._x-=e,this._y-=t,this},i.multiply=function(e,t){return this._x*=e,this._y*=t,this},i.divide=function(e,t){return this._x/=e,this._y/=t,this},i.clone=function(){var t=new e;return t._x=this._x,t._y=this._y,t},i.toString=function(){return"(x="+this.x+", y="+this.y+")"},e}();e.Vector2D=t,egret.registerClass(t,"ls.Vector2D")}(ls||(ls={}));var ls;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e}();e.Layout=t,egret.registerClass(t,"ls.Layout");var n=function(){function n(){}var i=(__define,n);i.prototype;return n.getTexture=function(e){for(var t in this.spriteSheets){var n=this.spriteSheets[t],i=n.getTexture(e);if(void 0!=i)return i}return null},n.saveLayout=function(n){var i=e.Config.sceneInfo.layoutData,a=new t;a.layoutName=n,a.nextLayoutName=i.$next,a.prevLayoutName=i.$previous,a.eventSheetName=i.$eventSheet;var r=i.$version;a.version=r?r:"1.1.1",this.layouts[n]=a},n.start=function(t){e.assert(null==t||""==t,"layout canot null!");var i=e.Config.sceneInfo.layoutData;e.assert(null==i,"can not find"+t);var a=i.$sceneSize.split(",");this.sceneWidth=+a[0],this.sceneHeight=+a[1],this.currentLayoutName=t,this.saveLayout(t);var r=i.children;if(r){for(var s=[],o=0,l=r.length;l>o;o++){var c=r[o];if("layer"!=c.localName){var h=this.decodeInstance(c);h&&void 0!==h.index&&(h.index=c.$index?+c.$index:o,s.push(h))}else if(null==this.layers[+c.$index]){var u=this.decodeLayers(c);this.layers[u.index]=u}}s=s.concat(n.globalInstances),s.sort(function(e,t){return e.index>t.index?1:e.index<t.index?-1:0});for(var o=0;o<s.length;o++){var h=s[o];e.World.getInstance().addChild(h)}}if(e.internalData)for(var o=0;o<e.internalData.length;o++){var v=e.internalData[o].name;e.getInstanceByPluginClassName(v,!0)}for(var f in this.curSceneInstances)e.registerObject(this.curSceneInstances[f].name,this.curSceneInstances[f])},n.decodeInstances=function(e){var t=[];if(e){var n=e.children;if(n)for(var i=0;i<n.length;i++){var a=n[i];if("layer"==a.localName){if(null==this.layers[+a.$index]){var r=this.decodeLayers(a);this.layers[r.index]=r}}else{var s=this.decodeInstance(a);s&&void 0!==s.index&&(s.index=+a.$index),s&&t.push(s)}}}return t},n.decodeLayers=function(t){var n=new e.LayerVo;return n.index=+t.$index,n.parallaxX=+t.$parallaxX,n.parallaxY=+t.$parallaxY,n.layerAlpha=+t.$layerAlpha,n.layerVisible="false"!=t.$index,n.layerScaleX=+t.$layerScaleX,n.layerScaleY=+t.$layerScaleY,n},n.decodeInstance=function(t){if("spritesheets"!=t.localName){var n=+t.$UID,i=t.$plugin,a=t.$name;"true"==t.$isVisual;if(e.isInternal(a))return null;var r=this.curSceneInstances[n];if(void 0!=r)return r;if(r=e.getInstanceByPluginClassName(i),r.isModel=!0,r.name=a,r.id=n,r.parallaxX=+t.$parallaxX,r.parallaxY=+t.$parallaxY,null!=t.children){null==this.instanceNames[a]&&(this.instanceNames[a]=a);for(var s,o=!1,l={},c=0,h=t.children.length;h>c;c++){var u=t.children[c],v=u.$name,f=u.$value,g=u.$valueDataType;switch(v){case"layer":o=!0,r[v]=+f;break;case"actions":r.setData(u.children);break;case"behaviors":s=u;break;default:switch(g){case"number":l[v]=+f;break;case"string":l[v]=decodeURIComponent(f),"collisionData"==v&&(r.collisionVectorData=this.decodeCollision(r,l[v]),r.collisionSourceVectorData=this.decodeCollision(r,l[v]));break;case"boolean":l[v]="true"==f;break;case"any":l[v]=e.eval_e(decodeURIComponent(f))}}}l.hasOwnProperty("width")&&(r.width=l.width),l.hasOwnProperty("height")&&(r.height=l.height);for(var d in l)r[d]=l[d];return o||(r.layer=0),r&&r.initialize(),null==this.curSceneInstances[n]&&(this.curSceneInstances[n]=r),r}}},n.decodeCollision=function(t,n){var i;if(t&&n)if(""==n)t.collisionType-1;else{var a=n.split("/n");if(2==a.length)switch(t.collisionType=+a[0],t.collisionType){case 0:i=[];var r=a[1].indexOf("_");if(-1!=r)for(var s=a[1].split("_"),o=0;o<s.length;o++){for(var l=s[o],c=l.split(","),h=[],u=0;u<c.length;u++){var v=c[u].split("|"),f=new e.Vector2D(+v[0],+v[1]);h[u]=f}i[o]=h}else{for(var c=a[1].split(","),h=[],o=0;o<c.length;o++){var v=c[o].split("|"),f=new e.Vector2D(+v[0],+v[1]);h[o]=f}i[0]=h}break;case 1:var g=a[1].split("|"),d=new e.Circle;d.center=new e.Vector2D(+g[0],+g[1]),d.radius=+g[2],i=d;break;case 2:var p=a[1].split("|");i=new e.Vector2D(+p[0],+p[1])}}return i},n.decodeBehaviors=function(t,n){if(t&&n){var i=n.children;if(i)for(var a=0;a<i.length;a++){var r=i[a],s=r.$behaviorType,o=e.getInstanceByPluginClassName(s);o.name=r.$name;var l=r.children;if(l)for(var c=l.length,h=0;c>h;h++){var u=l[h],v=u.$name,f=decodeURIComponent(u.$value),g=u.$valueDataType;switch(g){case"number":o[v]=+f;break;case"string":o[v]=f+"";break;case"any":o[v]=f;break;case"boolean":o[v]=Boolean(e.eval_e(f))}}t instanceof e.AIDisplayObject?t.addBehavior(o):e.assert(!0,t+"must instance of AIDisplayObject for have Behaviors"),o.onCreate(),o.isCreated=!0}}},n.destory=function(){for(var t in this.curSceneInstances){var n=this.curSceneInstances[t];n.global||(n instanceof e.AIDisplayObject&&n.removeAllBehaviors(),delete this.curSceneInstances[t])}this.instanceNames={},this.layers={}},n.curSceneInstances={},n.instanceNames={},n.layouts={},n.spriteSheets={},n.spriteSheetDatas={},n.globalInstances=[],n.layers={},n}();e.LayoutDecoder=n,egret.registerClass(n,"ls.LayoutDecoder")}(ls||(ls={}));var ls;!function(e){var t=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t);n.prototype;return t.init=function(e){e&&(this.stage=e,null==this.renderContainer&&(this.renderContainer=new egret.Sprite,this.renderContainer.name="renderContainer",e.addChild(this.renderContainer)),null==this.debugContainer&&(this.debugContainer=new egret.Sprite,this.debugContainer.name="debugContainer",e.addChild(this.debugContainer)),null==this.testContainer&&(this.testContainer=new egret.Sprite,this.testContainer.name="testContainer",e.addChild(this.testContainer)),null==this.preContainer&&(this.preContainer=new egret.Sprite,this.preContainer.name="preContainer",e.addChild(this.preContainer)),null==this.loadingContainer&&(this.loadingContainer=new egret.Sprite,this.loadingContainer.name="loadingContainer",e.addChild(this.loadingContainer)),this.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStageTouchEvent,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onStageTouchEvent,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEvent,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageTouchEvent,this),this.stage.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onStageTouchEvent,this))},t.onStageTouchEvent=function(e){this.touchX=e.stageX,this.touchY=e.stageY},t.touchX=0,t.touchY=0,t}(egret.DisplayObjectContainer);e.GameUILayer=t,egret.registerClass(t,"ls.GameUILayer")}(ls||(ls={}));var ls;!function(e){var t=function(){function t(e){this.oldSceneX=0,this.oldSceneY=0,this.newSceneX=0,this.newSceneY=0,this.updateCamera=!1,this.scene=e}var n=(__define,t),i=n.prototype;return i.lookAtPoint=function(e){this.pos!=e&&(this.pos=e,this._scrollX=this.pos.x,this._scrollY=this.pos.y,this.updateCamera=!0)},i.lookAtX=function(e){this._scrollX!=e&&(this.updateCamera=!0,this._scrollX=e)},i.lookAtY=function(e){this._scrollY!=e&&(this.updateCamera=!0,this._scrollY=e)},i.lookAtChar=function(e){this.lookAtTarget=e,(this._scrollX!=this.lookAtTarget.x||this._scrollY!=this.lookAtTarget.y)&&(this.updateCamera=!0,this._scrollX=this.lookAtTarget.x,this._scrollY=this.lookAtTarget.y)},i.render=function(){if(this.updateCamera){this.updateCamera=!1;var t=e.LayoutDecoder.sceneWidth,n=e.LayoutDecoder.sceneHeight,i=e.GameUILayer.stage.stageWidth,a=e.GameUILayer.stage.stageHeight,r=e.GameUILayer.renderContainer,s=e.World.getInstance().objectList;this._scrollX>i/2&&this._scrollX<t-i/2?this.newSceneX=i/2-this._scrollX:this._scrollX<=e.GameUILayer.stage.stageWidth/2?this.newSceneX=0:this._scrollX>t-i/2&&(this.newSceneX=i-t),this._scrollY>a/2&&this._scrollY<n-a/2?this.newSceneY=a/2-this._scrollY:this._scrollY<=a/2?this.newSceneY=0:this._scrollY>n-a/2&&(this.newSceneY=a-n);for(var o=0;o<s.length;o++){var l=s[o];l.isHasCamera||isNaN(this.oldSceneX)||isNaN(this.oldSceneY)||(l.x+=1*-((this.newSceneX-this.oldSceneX)*(100-l.parallaxX)/100),l.y+=1*-((this.newSceneY-this.oldSceneY)*(100-l.parallaxY)/100))}isNaN(this.oldSceneX)||isNaN(this.oldSceneY)||(r.x+=this.newSceneX-this.oldSceneX,r.y+=this.newSceneY-this.oldSceneY),this.oldSceneX=this.newSceneX,this.oldSceneY=this.newSceneY}},t}();e.SceneCamera=t,egret.registerClass(t,"ls.SceneCamera")}(ls||(ls={}));var ls;!function(e){var t=function(){function t(){if(this._objectList=[],this._collisionObjectList=[],this._objectHash={},this._updateCamera=!0,this._childCaches={},t._instance)throw new Error(this.constructor+"为单例！");t._instance=this,this._sceneCamera=new e.SceneCamera(this)}var n=__define,i=t,a=i.prototype;return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},n(a,"sceneCamera",function(){return this._sceneCamera}),n(a,"collisionObjectList",function(){return this._collisionObjectList}),n(a,"objectList",function(){return this._objectList}),n(a,"objectHash",function(){return this._objectHash}),a.scrollToTarget=function(e){this._sceneCamera.lookAtChar(e)},a.render=function(){this._sceneCamera.render();var t=(e.GameUILayer.stage.stageWidth,e.GameUILayer.stage.stageHeight,[]);for(var n in this._childCaches){var i=this._childCaches[n];t.push(i)}t.sort(function(e,t){return e.layer>t.layer?1:e.layer<t.layer?-1:0});for(var a=0;a<t.length;a++)for(var i=t[a],r=i.instances,s=i.parent,o=0;o<r.length;o++){var l=r[o],c=l.container;s.addChild(c)}},a.getChildByUID=function(e){void 0===e&&(e=0);for(var t=0,n=this._objectList.length;n>t;t++){var i=this._objectList[t];if(i.id==e)return i}return null},a.getChildByName=function(e){var t=[];if(null==e||""==e)return t;for(var n=0,i=this._objectList.length;i>n;n++){var a=this._objectList[n];a.name==e&&t.push(a)}return t},a.addChild=function(t,n){if(void 0===n&&(n=null),t){this._objectList.push(t);var i=t.container,a=t.layer,r=e.LayerManager.getLayerByIndex(t,a);i&&null==i.parent&&(null==this._childCaches[a]&&(this._childCaches[a]={instances:[],parent:r,layer:a}),this._childCaches[a].instances.push(t));var s=t.name;this._objectHash.hasOwnProperty(s)||(this._objectHash[s]=[]),this._objectHash[s].push(t),t instanceof e.AIDisplayObject&&t.collision&&this._collisionObjectList.push(t),e.Trigger.register(t)}},a.removeChild=function(t){if(t){var n=this.objectList.indexOf(t);-1!=n&&this._objectList.splice(n,1);var i=t.container;if(i&&null!=i.parent&&i.parent.removeChild(i),this._objectHash.hasOwnProperty(name)){var a=this._objectHash[name],r=a.indexOf(t);-1!=r&&a.splice(r,1)}if(t instanceof e.AIDisplayObject){var s=this._collisionObjectList.indexOf(t);-1!=s&&this._collisionObjectList.splice(s,1)}var o=t;if(o&&this._childCaches[o.layer]){var l=this._childCaches[o.layer].instances;if(l){var c=l.indexOf(o);-1!=c&&l.splice(c,1),0==l.length&&delete this._childCaches[o.layer]}}e.Trigger.removeTrigger(t)}},a.removeAllChildrens=function(){e.Trigger.removeAllTriggers();for(var t in this._objectHash){var n=this._objectHash[t];if(n)for(var i=0;i<n.length;i++){var a=n[i];
a.global||(a.destoryOnChangeScene(),delete this._objectHash[t])}}for(var r=[],i=0;i<this._collisionObjectList.length;i++){var a=this._collisionObjectList[i];a.global&&r.push(a)}this._collisionObjectList=r},a.destory=function(){this._sceneCamera.lookAtPoint(new egret.Point(0,0)),null!=t.onWorldDestory&&t.onWorldDestory(),e.LayoutDecoder.destory(),e.EventSheetDecoder.destory(),this.removeAllChildrens()},t}();e.World=t,egret.registerClass(t,"ls.World")}(ls||(ls={}));var ls;!function(e){var t=function(t){function n(){t.call(this),this.id=0,this.name="Object",this.isModel=!1,this.timeScale=1,this.parallaxX=100,this.parallaxY=100,this.isDead=!1,this.global=!1,this.variables={},this.index=0,this.paramInstances={},this.actionSaves={},this.currentStatus=!0,this.selfStatus=!0,this._uid=0,n._uniqueID++,n.U_ID++,this._uid=n.U_ID,this.name="Object",e.Trigger.register(this)}__extends(n,t);var i=__define,a=n,r=a.prototype;return i(r,"u_id",function(){return this._uid}),i(r,"dt",function(){return this.timeScale/e.EventSheetDecoder.tickInterval}),r.getClass=function(){return this.constructor},r.initialize=function(){},r.onTick=function(){},r.saveToJSON=function(){return{name:this.name,isModel:this.isModel,paramInstances:this.paramInstances,timeScale:this.timeScale,global:this.global}},r.loadFromJSON=function(e){e&&(this.name=e.name,this.isModel=e.isModel,this.paramInstances=e.paramInstances,this.timeScale=e.timeScale,this.global=e.global)},r.addVariable=function(t,n){this[t]=e.eval_e(n),this.variables[t]=e.eval_e(n)},r.getFirstPicked=function(){var t=e.World.getInstance().objectHash[this.name];return t?t[0]:void 0},r.compareTwoValue=function(t){return{instances:[this],status:e.compare(t.value1,t.operationType,t.value2)}},r.isBetweenValues=function(t){var n=e.eval_e(t.value),i=e.eval_e(t.lowerValue),a=e.eval_e(t.highValue);return a>i?{instances:[this],status:n>i&&a>n}:{instances:[this],status:i>n&&n>a}},r.isNumberNaN=function(t){return{instances:[this],status:"number"==typeof e.eval_e(t.value)}},r.destoryOnChangeScene=function(){this.destory()},r.destory=function(){},r.clone=function(){var e=new n;e.name=this.name,e.isModel=this.isModel,e.timeScale=this.timeScale,e.global=this.global;for(var t in this.variables)e.addVariable(t,this.variables[t]);return e},n._uniqueID=0,n.U_ID=0,n}(egret.EventDispatcher);e.AIObject=t,egret.registerClass(t,"ls.AIObject");var n=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.CompareTwoValuesEvent=n,egret.registerClass(n,"ls.CompareTwoValuesEvent");var i=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.IsBetweenValuesEvent=i,egret.registerClass(i,"ls.IsBetweenValuesEvent");var a=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.IsNumberNaNEvent=a,egret.registerClass(a,"ls.IsNumberNaNEvent")}(ls||(ls={}));var ls;!function(e){var t=function(t){function n(){t.call(this),this._isAddToStage=!1,this._collision=!1,this._isCollisioning=!1,this._mirrored=3,this._anchorOffsetX=0,this._anchorOffsetY=0,this._sourceWidth=0,this._sourceHeight=0,this._scaleX=1,this._scaleY=1,this._scale=1,this.behaviors=[],this.layer=0,this.vx=0,this.vy=0,this.isInScreenOnce=!1,this.solidEnabeld=!1,this.platformEnabled=!1,this.jumpthruEnabled=!1,this.collisionsEnabled=!1,this.collisionType=-1,this.update=!0,this.isOldCollision=!1,this._scaleXChanged=!1,this._scaleYChanged=!1,this._container=new egret.Sprite,this._container.owner=this,this._container.addEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStageHanlder,this),this._container.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveToStageHanlder,this),this._container.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchEvent,this),this._container.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchEvent,this),this._container.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEvent,this),this._container.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchEvent,this),this._container.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onTouchEvent,this)}__extends(n,t);var i=__define,a=n,r=a.prototype;return r.onTouchEvent=function(t){switch(this._isTouchDown=t.touchDown,this._touchPointID=t.touchPointID,this._touchX=t.localX,this._touchY=t.localY,this._touchStageX=t.stageX,this._touchStageY=t.stageY,t.type){case egret.TouchEvent.TOUCH_TAP:this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onButtonTap));break;case egret.TouchEvent.TOUCH_BEGIN:this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onButtonBegin));break;case egret.TouchEvent.TOUCH_END:this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onButtonEnd));break;case egret.TouchEvent.TOUCH_MOVE:this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onButtonMove));break;case egret.TouchEvent.TOUCH_RELEASE_OUTSIDE:this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onButtonReleaseOutside))}},r.onCreate=function(){this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onCreated))},r.saveToJSON=function(){return{name:this.name,isModel:this.isModel,paramInstances:this.paramInstances,timeScale:this.timeScale,x:this.x,y:this.y,width:this.width,height:this.height,scale:this.scale,scaleX:this.scaleX,scaleY:this.scaleY,angle:this.angle,alpha:this.alpha,visible:this.visible,mirrored:this.mirrored,collision:this.collision,anchorX:this.anchorX,anchorY:this.anchorY,layer:this.layer,collisionsEnabled:this.collisionsEnabled,collisionData:this.collisionData,collisionType:this.collisionType,collisionVectorData:this.collisionVectorData}},r.loadFromJSON=function(e){e&&(this.name=e.name,this.isModel=e.isModel,this.paramInstances=e.paramInstances,this.timeScale=e.timeScale,this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.scale=e.scale,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.angle=e.angle,this.alpha=e.alpha,this.visible=e.visible,this.mirrored=e.mirrored,this.collision=e.collision,this.anchorX=e.anchorX,this.anchorY=e.anchorY,this.layer=e.layer,this.collisionsEnabled=e.collisionsEnabled,this.collisionData=e.collisionData,this.collisionType=e.collisionType,this.collisionVectorData=e.collisionVectorData)},i(r,"layerIndex",function(){return e.LayerManager.getIndexByLayer(this.container.parent)}),i(r,"enabled",function(){return this.container.touchEnabled},function(e){this.container.touchChildren=this.container.touchEnabled=e}),i(r,"collision",function(){return this._collision},function(e){this._collision=e}),i(r,"isCollsioning",function(){return this._isCollisioning},function(e){this._isCollisioning=e}),i(r,"isOnScreen",function(){if(this.container.parent){var t=this.container.parent.localToGlobal(this.x,this.y);return e.CollisionUtils.isCollsionWithRect(t.x-this.anchorOffsetX,t.y-this.anchorOffsetY,this.width,this.height,0,0,e.GameUILayer.stage.stageWidth,e.GameUILayer.stage.stageHeight)}return!1}),r.getBounds=function(){if(this.container.numChildren){var e=this.container.getChildAt(0);return e.getBounds()}return this.container.getBounds()},r.getGlobalBounds=function(){return void 0==this._globalBoundRect&&(this._globalBoundRect=new egret.Rectangle),this.container.getTransformedBounds(e.GameUILayer.stage,this._globalBoundRect),this._globalBoundRect},r.setIsColliding=function(t,n){this.collisionTarget=n,t&&(this.isCollsioning=t),this.isOldCollision!=t&&(this.isOldCollision=t,n&&t&&(this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onCollisionWithOtherObject,n)),n.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onCollisionWithOtherObject,this))))},i(r,"mirrored",function(){return this._mirrored},function(e){if(this._mirrored!=e)switch(this._mirrored=e,this._mirrored){case 0:this.scaleX=-1;break;case 1:this.scaleY=-1;break;case 2:this.scaleX=-1,this.scaleY=-1;break;case 3:this.scaleX=1,this.scaleY=1}}),r.getBehavior=function(e){for(var t=0;t<this.behaviors.length;t++){var n=this.behaviors[t];if(n.constructor==e)return n}return null},r.addBehavior=function(e){return null!=e?("ScrollToBehavior"==e.constructor.name&&(this.isHasCamera=!0),e.inst=this,e.enabled=e.enabled,this.isInScreenOnce=!1,this.behaviors.push(e),!0):!1},r.removeBehavior=function(e){if(null!=e){var t=this.behaviors.indexOf(e);if(-1!=t)return e=null,this.behaviors.splice(t,1)}return null},r.removeAllBehaviors=function(){this.behaviors.length=0},i(r,"container",function(){return this._container}),i(r,"x",function(){return this.container.x},function(e){this.container.x!=e&&(this.update=!0,this.container.x=e)}),i(r,"y",function(){return this.container.y},function(e){this.container.y!=e&&(this.update=!0,this.container.y=e)}),i(r,"width",function(){return this.container.width},function(e){this.container.width!=e&&(this.update=!0,this.container.width=e,this._width=e,0==this._sourceWidth&&(this._sourceWidth=this._width),this._scaleX=e/this._sourceWidth,this.anchorX&&(this.container.anchorOffsetX=this.width*this.anchorX*this._scaleX))}),i(r,"height",function(){return this.container.height},function(e){this.container.height!=e&&(this.update=!0,this.container.height=e,this._height=e,0==this._sourceHeight&&(this._sourceHeight=this._height),this._scaleY=e/this._sourceHeight,this.anchorY&&(this.container.anchorOffsetY=this.height*this.anchorY*this._scaleY))}),i(r,"angle",function(){return this.container.rotation},function(e){this.container.rotation!=e&&(this.update=!0,this.container.rotation=e)}),i(r,"alpha",function(){return this.container.alpha},function(e){this.container.alpha!=e&&(this.update=!0,this.container.alpha=e)}),i(r,"visible",function(){return this.container.visible},function(e){this.container.visible!=e&&(this.update=!0,this.container.visible=e)}),i(r,"scale",function(){return this.container.scaleX},function(e){this._scale!=e&&(this.update=!0,this._scale=this.container.scaleX=this.container.scaleY=e)}),i(r,"scaleX",function(){return this.container.scaleX},function(e){this.container.scaleX!=e&&(this.update=!0,this.container.scaleX=e,this._scaleX=e)}),i(r,"scaleY",function(){return this.container.scaleY},function(e){this.container.scaleY!=e&&(this.update=!0,this.container.scaleY=e,this._scaleY=e)}),i(r,"anchorX",function(){return this._anchorX},function(e){this._anchorX!=e&&(this.width&&(this.container.anchorOffsetX=this.width*e),this._anchorX=e)}),i(r,"anchorOffsetX",function(){return this.container.anchorOffsetX}),i(r,"anchorOffsetY",function(){return this.container.anchorOffsetY}),i(r,"anchorY",function(){return this._anchorY},function(e){this._anchorY!=e&&(this.height&&(this.container.anchorOffsetY=this.height*e),this._anchorY=e)}),r.isTouchDown=function(e){return{instances:[this],status:this._isTouchDown}},r.onButtonTap=function(e){return{instances:[this],status:!0}},r.onButtonBegin=function(e){return{instances:[this],status:!0}},r.onButtonEnd=function(e){return{instances:[this],status:!0}},r.onButtonMove=function(e){return{instances:[this],status:!0}},r.onButtonReleaseOutside=function(e){return{instances:[this],status:!0}},r.isEnabled=function(e){return{instances:[this],status:this.enabled}},r.isBetweenAngles=function(t){var n=e.eval_e(t.angle),i=e.eval_e(t.angle1),a=e.eval_e(t.angle2),r=this._isClosewideform(i,a);return r?{instances:[this],status:this._isClosewideform(n,i)&&this._isClosewideform(n,a)}:{instances:[this],status:this._isClosewideform(n,i)&&!this._isClosewideform(n,a)}},r.isclockwiseform=function(t){var n=e.eval_e(t.angle1),i=e.eval_e(t.angle2);return{instances:[this],status:this._isClosewideform(n,i)}},r._isClosewideform=function(t,n){var i=e.MathUtils.toRadian(t),a=e.MathUtils.toRadian(n),r=Math.sin(i),s=Math.cos(i),o=Math.sin(a),l=Math.cos(a);return 0>=s*o-r*l},r.isObjectMoving=function(e){var t=this.x,n=this.y;return this._oldX!=t||this._oldY!=n?(this._oldX=t,this._oldY=n,{instances:[this],status:!0}):{instances:[this],status:!1}},r.onCreated=function(e){return{instances:[this],status:!0}},r.compareInstanceVariable=function(t){return{instances:[this],status:e.compare(this[t.instanceVariable],t.operationType,t.value)}},r.compareX=function(t){return{instances:[this],status:e.compare(this.x,t.operationType,t.x)}},r.compareY=function(t){return{instances:[this],status:e.compare(this.y,t.operationType,t.y)}},r.compareWidth=function(t){return{instances:[this],status:e.compare(this.width,t.operationType,t.width)}},r.compareHeight=function(t){return{instances:[this],status:e.compare(this.height,t.operationType,t.height)}},r.compareAlpha=function(t){return{instances:[this],status:e.compare(this.alpha,t.operationType,t.alpha)}},r.compareMirored=function(t){return{instances:[this],status:e.eval_e(t.mirrored)==this._mirrored}},r.compareObjectMoveAngle=function(t){var n=this.x,i=this.y,a=!1;if(isNaN(this._oldMoveX)||isNaN(this._oldMoveY))this._oldMoveX=n,this._oldMoveY=i;else if(this._oldMoveX!=n||this._oldMoveY!=i){var r=Math.atan2(i-this._oldMoveY,n-this._oldMoveX),s=e.MathUtils.toAngle(r);a=e.compare(s,t.operationType,t.angle),this._oldMoveX=n,this._oldMoveY=i}return{instances:[this],status:a}},r.compareObjectAngle=function(t){return{instances:[this],status:e.compare(this.angle,t.operationType,t.angle)}},r.compareTargetDistance=function(t){var n=e.eval_e(t.x),i=e.eval_e(t.y),a=n-this.x,r=i-this.y,s=Math.sqrt(a*a+r*r);return{instances:[this],status:e.compare(s,t.operationType,t.distance)}},r.onAddToStage=function(e){return{instances:[this],status:null!=this.container.stage||this._isAddToStage}},r.onRemoveToToStage=function(){return{instances:[this],status:!this.container.stage||!this._isAddToStage}},r.isOnScreenOrFalse=function(t){return{instances:[this],status:1===e.eval_e(t.isOnScreen)?this.isOnScreen:!this.isOnScreen}},r.isVisible=function(t){return{instances:[this],status:0!==e.eval_e(t.isVisible)}},r.onCollisionWithOtherObject=function(e){return{instances:[this],status:!0}},r.onEnabledDisabledCollision=function(e){return{instances:[this],status:1==e.status}},r.isOverlappingOtherObject=function(e){return{instances:[this.collisionTarget,e.object],status:this.collisionTarget.name==e.object.name}},r.onTweenComplete=function(e){return{instances:[this],status:!0}},r.pickByUniqueID=function(t){for(var n,i=e.World.getInstance().objectHash[this.name],a=0;a<i.length;a++){var r=i[a];if(r.id==e.eval_e(t.uniqueID)){n=r;break}}return{instances:[r],status:Boolean(n)}},r.onDestory=function(e){return{instances:[this],status:!0}},r.addTo=function(t,n){var i=e.eval_e(n);e.assert("number"!=typeof i,"AIObject addTo parameter type incorrect!!"),this[t]+=i},r.setBoolean=function(t,n){var i=e.eval_e(n);e.assert("number"!=typeof i,"AIObject setBoolean parameter type incorrect!!"),this[t]=1==i},r.setValue=function(t,n){var i=e.eval_e(n);this[t]=i},r.subtractFrom=function(t,n){var i=e.eval_e(n);e.assert("number"!=typeof i,"AIObject subtractFrom parameter type incorrect!!"),this[t]-=i},r.toogleBoolean=function(e){this[e]=!this[e]},r.spawn=function(t,n,i,a,r){var s=e.eval_e(n),o=e.eval_e(i),l=e.eval_e(a),r=e.eval_e(r);e.assert("number"!=typeof s||"number"!=typeof o||"number"!=typeof l,"AIDisplayObject spawn parameter type incorrect!!");var c=t.clone();c.layer=s,1==r?(c.angle=this.angle,c.relyOnTarget=this):c.relyOnTarget=null;var h=e.MathUtils.angleTo(this.x,this.y,this.container.x+o,this.container.y+l),u=Math.sqrt(o*o+l*l),v=e.MathUtils.toRadian(c.angle)+e.MathUtils.toRadian(h);return c.x=this.x+Math.cos(v)*u,c.y=this.y+Math.sin(v)*u,e.lakeshoreInst()[c.name]=c,e.World.getInstance().addChild(c),[c]},r.moveAtAngle=function(t,n){var i=e.eval_e(t),a=e.eval_e(n);e.assert("number"!=typeof i,"AIDisplayObject moveAtAngle parameter type incorrect!!"),e.assert("number"!=typeof a,"AIDisplayObject moveAtAngle parameter type incorrect!!");var r=e.MathUtils.toRadian(i);this.x+=Math.cos(r)*a*e.timeScale(),this.y+=Math.sin(r)*a*e.timeScale()},r.moveForward=function(t){var n=e.eval_e(t);e.assert("number"!=typeof n,"AIDisplayObject moveForward parameter type incorrect!!");var i=e.MathUtils.toRadian(this.angle);this.x+=Math.cos(i)*n*e.timeScale(),this.y+=Math.sin(i)*n*e.timeScale()},r.moveToTargetPoint=function(t,n,i){var t=e.eval_e(t),n=e.eval_e(n),i=e.eval_e(i);e.assert("number"!=typeof t||"number"!=typeof n||"number"!=typeof i,"AIDisplayObject moveToTargetPoint parameter type incorrect!!");var a=t-this.x,r=n-this.y,s=Math.sqrt(a*a+r*r);if(i>s)this.x=t,this.y=n;else{var o=Math.atan2(r,a);this.x+=Math.cos(o)*i*e.timeScale(),this.y+=Math.sin(o)*i*e.timeScale()}},r.rotateClockWise=function(t){var n=e.eval_e(t);e.assert("number"!=typeof n,"AIDisplayObject rotateClockWise parameter type incorrect!!"),this.angle+=n*e.timeScale(),this.angle=e.MathUtils.clampAngle(this.angle)},r.rotateCounterClockWise=function(t){var n=e.eval_e(t);e.assert("number"!=typeof n,"AIDisplayObject rotateCounterClockWise parameter type incorrect!!"),this.angle-=n*e.timeScale(),this.angle=e.MathUtils.clampAngle(this.angle)},r.rotateTowardAngle=function(t,n){var i=e.eval_e(t),a=e.eval_e(n);e.assert("number"!=typeof i||"number"!=typeof a,"AIDisplayObject rotateTowardAngle parameter type incorrect!!");var r=e.MathUtils.toAngle(e.MathUtils.angleRadius(e.MathUtils.toRadian(this.angle),e.MathUtils.toRadian(i),e.MathUtils.toRadian(a*e.timeScale())));isNaN(r)||this.angle!=r&&(this.angle=r)},r.rotateTowardPosition=function(t,n,i){var t=e.eval_e(t),n=e.eval_e(n),a=e.eval_e(i);e.assert("number"!=typeof t||"number"!=typeof n||"number"!=typeof a,"AIDisplayObject rotateTowardPosition parameter type incorrect!!");var r=e.MathUtils.angleTo(this.x,this.y,t,n),s=e.MathUtils.angleRotate(this.angle,r,a*e.timeScale());isNaN(s)||this.angle!=s&&(this.angle=s)},r.setAngle=function(t){var n=e.eval_e(t);e.assert("number"!=typeof n,"AIDisplayObject setAngle parameter type incorrect!!"),this.angle=n},r.setAngleTowardPosition=function(t,n){var t=e.eval_e(t),n=e.eval_e(n);e.assert("number"!=typeof t||"number"!=typeof n,"AIDisplayObject setAngleTowardPosition parameter type incorrect!!");var i=e.MathUtils.angleTo(this.x,this.y,t,n);this.angle=i},r.setHeight=function(t){var n=e.eval_e(t);e.assert("number"!=typeof n,"AIDisplayObject setHeight parameter type incorrect!!"),this.height=n},r.setMirrored=function(t){var n=e.eval_e(t);e.assert("number"!=typeof n,"AIDisplayObject setMirrored parameter type incorrect!!"),this.mirrored=n},r.setPosition=function(t,n){var i=e.eval_e(t),a=e.eval_e(n);e.assert("number"!=typeof i||"number"!=typeof a,"AIDisplayObject setPosition parameter type incorrect!!"),this.x=i,this.y=a},r.setPositionToAnotherObject=function(t,n,i){var a=e.eval_e(n),r=e.eval_e(i),s=t instanceof e.AIObject?t:e.eval_e(t);e.assert("number"!=typeof a||"number"!=typeof a,"AIDisplayObject setPositionToAnotherObject parameter type incorrect!!"),this.x=s.x+a,this.y=s.y+r},r.setScale=function(t){var n=e.eval_e(t);e.assert("number"!=typeof n,"AIDisplayObject setScale parameter type incorrect!!"),this.scale=n},r.setScaleX=function(t){var n=e.eval_e(t);e.assert("number"!=typeof n,"AIDisplayObject setScaleX parameter type incorrect!!"),this.scaleX=n},r.setScaleY=function(t){var n=e.eval_e(t);e.assert("number"!=typeof n,"AIDisplayObject setScaleY parameter type incorrect!!"),this.scaleY=n},r.setSize=function(t,n){var i=e.eval_e(t),a=e.eval_e(n);e.assert("number"!=typeof i||"number"!=typeof a,"AIDisplayObject setSize parameter type incorrect!!"),this.width=i,this.height=a},r.setVisible=function(t){var n=e.eval_e(t);e.assert("number"!=typeof n,"AIDisplayObject setVisible parameter type incorrect!!"),this.visible=1==n},r.setAlpha=function(t){var n=e.eval_e(t);e.assert("number"!=typeof n,"AIDisplayObject setAlpha parameter type incorrect!!"),1e-4>n&&(n=0),n>1&&(n=1),this.alpha=n},r.setWidth=function(t){var n=e.eval_e(t);e.assert("number"!=typeof n,"AIDisplayObject setWidth parameter type incorrect!!"),this.width=n},r.setX=function(t){var n=e.eval_e(t);e.assert("number"!=typeof n,"AIDisplayObject setX parameter type incorrect!!"),this.x=n},r.setY=function(t){var n=e.eval_e(t);e.assert("number"!=typeof n,"AIDisplayObject setY parameter type incorrect!!"),this.y=n},r.setEnabled=function(t){var n=e.eval_e(t);e.assert("number"!=typeof n,"AIDisplayObject setEnabled parameter type incorrect!!"),this.enabled=n>=1},r.setMask=function(e){e&&e instanceof n&&(this.container.mask=e.container)},r.setMaskByLayer=function(t){t=e.eval_e(t);var n=e.LayerManager.getLayer(t);n&&(this.container.mask=n)},r.setMaskIsNull=function(){this.container.mask=null},r.addColorMatrixFilter=function(e){if(e){var t=e.split(",");if(t&&20==t.length){for(var n=[],i=0;i<t.length;i++)n[i]=+t[i];var a=new egret.ColorMatrixFilter(n);null==this.container.filters&&(this.container.filters=[]),this.container.filters.push(a)}}},r.addBlurFilter=function(t,n){t=e.eval_e(t),n=e.eval_e(n);var i=new egret.BlurFilter(t,n);null==this.container.filters&&(this.container.filters=[]),this.container.filters.push(i)},r.addDropShadowFilter=function(t,n,i,a,r,s,o,l,c,h,u){t=e.eval_e(t),n=e.eval_e(n),i=e.eval_e(i),a=e.eval_e(a),r=e.eval_e(r),s=e.eval_e(s),o=e.eval_e(o),l=e.eval_e(l),c=e.eval_e(c),h=e.eval_e(h),u=e.eval_e(u);var v=new egret.DropShadowFilter(t,n,i,a,r,s,o,l,c,h,u);null==this.container.filters&&(this.container.filters=[]),this.container.filters.push(v)},r.addGlowFilter=function(t,n,i,a,r,s,o,l){t=e.eval_e(t),n=e.eval_e(n),i=e.eval_e(i),a=e.eval_e(a),r=e.eval_e(r),s=e.eval_e(s),o=e.eval_e(o),l=e.eval_e(l);var c=new egret.GlowFilter(t,n,i,a,r,s,o,l);null==this.container.filters&&(this.container.filters=[]),this.container.filters.push(c)},r.removeFilterByType=function(t){if(t=e.eval_e(t),this.container.filters)for(var n=0,i=0;i<this.container.filters.length;i++){var a=this.container.filters[i];switch(t){case 0:a instanceof egret.ColorMatrixFilter&&(this.container.filters.splice(i-n,1),n++);break;case 1:a instanceof egret.BlurFilter&&(this.container.filters.splice(i-n,1),n++);break;case 2:a instanceof egret.DropShadowFilter&&(this.container.filters.splice(i-n,1),n++);break;case 3:a instanceof egret.GlowFilter&&(this.container.filters.splice(i-n,1),n++)}}},r.removeAllFilters=function(){this.container.filters=null},r.execTween=function(t,n,i,a,r,s,o,l,c,h,u,v,f,g,d){var p=t?e.eval_e(t):"lsTweenStartKey",y=e.eval_e(h),_=e.eval_e(u),m=e.eval_e(v),b=egret.Ease[_],x={};n&&(x.x=e.eval_e(n)),i&&(x.y=e.eval_e(i)),a&&(x.anchorX=e.eval_e(a)),r&&(x.anchorY=e.eval_e(r)),s&&(x.width=e.eval_e(s)),o&&(x.height=e.eval_e(o)),l&&(x.angle=e.eval_e(l)),c&&(x.alpha=e.eval_e(c)),g&&(x.scaleX=e.eval_e(g)),d&&(x.scaleY=e.eval_e(d)),egret.setTimeout(function(){egret.Tween.get(this,{loop:1==f,onChange:function(){},onChangeObj:this}).to(x,y,b).wait(0).call(function(t){this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onTweenComplete,t))},this,[p])},this,m)},r.enabledDisabledCollision=function(t){var n=e.eval_e(t);this.collision=1==n;var i=e.World.getInstance().collisionObjectList,a=i.indexOf(this);if(this.collision)-1==a&&i.push(this);else{var a=i.indexOf(this);-1!=a&&i.splice(a,1)}},r.onAddToStageHanlder=function(e){this._isAddToStage=!0},r.onRemoveToStageHanlder=function(e){this._isAddToStage=!1},r.destoryTest=function(){this.destory()},r.destoryOnChangeScene=function(){this.removeAllBehaviors(),this.destory()},r.destory=function(){if(!this.isModel){var t=this.name,n=e.World.getInstance().objectHash[t];if(n){var i=n.indexOf(this);-1!=i&&n.splice(i,1)}}if(this.behaviors)for(var a=0;a<this.behaviors.length;a++){var r=this.behaviors[a];r.destory()}this.container&&this.container.graphics.clear(),this.container.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddToStageHanlder,this),this.container.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveToStageHanlder,this),e.World.getInstance().removeChild(this),this.container=null,this.global||(this.isDead=!0),this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onDestory))},r.clone=function(){var e=new n;e.name=this.name,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e.scale=this.scale,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.angle=this.angle,e.alpha=this.alpha,e.visible=this.visible,e.mirrored=this.mirrored,e.collision=this.collision,e.anchorX=this.anchorX,e.anchorY=this.anchorY,e.layer=this.layer,e.global=this.global,e.collisionsEnabled=this.collisionsEnabled,e.collisionData=this.collisionData,e.collisionType=this.collisionType,e.collisionVectorData=this.collisionVectorData,e.collisionSourceVectorData=this.collisionSourceVectorData,e.behaviors=[];for(var t=0;t<this.behaviors.length;t++){var i=this.behaviors[t],a=i.clone();e.addBehavior(a),a.onCreate()}for(var r in this.variables)e.addVariable(r,this.variables[r]);return e},n}(e.AIObject);e.AIDisplayObject=t,egret.registerClass(t,"ls.AIDisplayObject");var n=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.IsButtonDownEvent=n,egret.registerClass(n,"ls.IsButtonDownEvent");var i=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnButtonTapEvent=i,egret.registerClass(i,"ls.OnButtonTapEvent");var a=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnButtonBeginEvent=a,egret.registerClass(a,"ls.OnButtonBeginEvent");var r=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnButtonEndEvent=r,egret.registerClass(r,"ls.OnButtonEndEvent");var s=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnButtonMoveEvent=s,egret.registerClass(s,"ls.OnButtonMoveEvent");var o=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnButtonReleaseOutsideEvent=o,egret.registerClass(o,"ls.OnButtonReleaseOutsideEvent");var l=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.IsButtonEnabledEvent=l,egret.registerClass(l,"ls.IsButtonEnabledEvent");var c=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.IsBetweenAnglesEvent=c,egret.registerClass(c,"ls.IsBetweenAnglesEvent");var h=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.IsClockwiseFromEvent=h,egret.registerClass(h,"ls.IsClockwiseFromEvent");var u=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.IsObjectMovingEvent=u,egret.registerClass(u,"ls.IsObjectMovingEvent");var v=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnCreatedEvent=v,egret.registerClass(v,"ls.OnCreatedEvent");var f=function(e){function t(){e.apply(this,arguments),this.value=0}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.CompareInstanceVariableEvent=f,egret.registerClass(f,"ls.CompareInstanceVariableEvent");var g=function(e){function t(){e.apply(this,arguments),this.x=0}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.CompareXPosEvent=g,egret.registerClass(g,"ls.CompareXPosEvent");var d=function(e){function t(){e.apply(this,arguments),this.y=0}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.CompareYPosEvent=d,egret.registerClass(d,"ls.CompareYPosEvent");var p=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.CompareWidthEvent=p,egret.registerClass(p,"ls.CompareWidthEvent");var y=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.CompareHeightEvent=y,egret.registerClass(y,"ls.CompareHeightEvent");var _=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.CompareOpacityEvent=_,egret.registerClass(_,"ls.CompareOpacityEvent");var m=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.CompareMirroredStatusEvent=m,egret.registerClass(m,"ls.CompareMirroredStatusEvent");var b=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.CompareObjectMoveAngleEvent=b,egret.registerClass(b,"ls.CompareObjectMoveAngleEvent");var x=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.CompareObjectAngleEvent=x,egret.registerClass(x,"ls.CompareObjectAngleEvent");var E=function(e){function t(){e.apply(this,arguments),this.x=0,this.y=0,this.distance=0}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.CompareTargetDistanceEvent=E,egret.registerClass(E,"ls.CompareTargetDistanceEvent");var C=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnStartOfLayoutEvent=C,egret.registerClass(C,"ls.OnStartOfLayoutEvent");var I=function(e){function t(){e.apply(this,arguments),this.isOnScreen=1}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.IsOnScreenEvent=I,egret.registerClass(I,"ls.IsOnScreenEvent");var S=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.IsVisibleEvent=S,egret.registerClass(S,"ls.IsVisibleEvent");var T=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnCollisionWithOtherObjectEvent=T,egret.registerClass(T,"ls.OnCollisionWithOtherObjectEvent");var D=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnEnabledDisabledCollisionEvent=D,egret.registerClass(D,"ls.OnEnabledDisabledCollisionEvent");var O=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.IsOverlappingOtherObjectEvent=O,egret.registerClass(O,"ls.IsOverlappingOtherObjectEvent");var w=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.PickByUniqueIDEvent=w,egret.registerClass(w,"ls.PickByUniqueIDEvent");var M=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnDestoryEvent=M,egret.registerClass(M,"ls.OnDestoryEvent");var A=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnTweenCompleteEvent=A,egret.registerClass(A,"ls.OnTweenCompleteEvent")}(ls||(ls={}));var ls;!function(e){var t=function(t){function n(){t.call(this),this._sourceWidth=0,this._sourceHeight=0,this._isResourceLoaded=!1,this.name="Sprite",this._bitmap=new egret.Bitmap}__extends(n,t);var i=__define,a=n,r=a.prototype;return i(r,"bitmapURL",function(){return this._bitmapURL}),r.initialize=function(){this.createBitmap(this.url)},r.saveToJSON=function(){return{name:this.name,isModel:this.isModel,paramInstances:this.paramInstances,timeScale:this.timeScale,x:this.x,y:this.y,width:this.width,height:this.height,scale:this.scale,scaleX:this.scaleX,scaleY:this.scaleY,angle:this.angle,alpha:this.alpha,visible:this.visible,mirrored:this.mirrored,collision:this.collision,anchorX:this.anchorX,anchorY:this.anchorY,layer:this.layer,collisionsEnabled:this.collisionsEnabled,collisionData:this.collisionData,collisionType:this.collisionType,collisionVectorData:this.collisionVectorData}},r.loadFromJSON=function(e){e&&(this.name=e.name,this.isModel=e.isModel,this.paramInstances=e.paramInstances,this.timeScale=e.timeScale,this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this.scale=e.scale,this.scaleX=e.scaleX,this.scaleY=e.scaleY,this.angle=e.angle,this.alpha=e.alpha,this.visible=e.visible,this.mirrored=e.mirrored,this.collision=e.collision,this.anchorX=e.anchorX,this.anchorY=e.anchorY,this.layer=e.layer,this.collisionsEnabled=e.collisionsEnabled,this.collisionData=e.collisionData,this.collisionType=e.collisionType,this.collisionVectorData=e.collisionVectorData)
},r.createBitmap=function(t){if(t&&""!=t){this._bitmapURL=t;var n=this,i=e.getTexture(t);if(null!=i)var a=i[0];if(null!=a)this._bitmap.texture=a,this._sourceWidth=a.textureWidth,this._sourceHeight=a.textureHeight,this._bitmap.width=this.width,this._bitmap.height=this.height,i&&(this._bitmap.x=i[1],this._bitmap.y=i[2]),this.container.addChild(this._bitmap),this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,n.onResourceLoaded)),this.dispatchEvent(new egret.Event(egret.Event.COMPLETE));else{var r=function(t){t&&(n._bitmap.texture=t,n._sourceWidth=t.textureWidth,n._sourceHeight=t.textureHeight,n._bitmap.width=n.width,n._bitmap.height=n.height,n.container.addChild(n._bitmap),n.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,n.onResourceLoaded)),n.dispatchEvent(new egret.Event(egret.Event.COMPLETE)))};RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_IMAGE)}}},r.addChild=function(t){e.World.getInstance().addChild(t,this)},r.removeChild=function(t){e.World.getInstance().removeChild(t)},r.loadImage=function(t){var n=e.eval_e(t);this.createBitmap(n)},i(r,"width",function(){return this._width},function(e){this._bitmap&&this._bitmap.width!=e&&(this._bitmap.width=e),0==this._sourceWidth&&(this._sourceWidth=e),this._scaleX=e/this._sourceWidth,this._width!=e&&(this.update=!0,this._width=e),this.anchorX&&(this.container.anchorOffsetX=this.width*this.anchorX)}),i(r,"height",function(){return this._height},function(e){this._bitmap&&this._bitmap.height!=e&&(this._bitmap.height=e),0==this._sourceHeight&&(this._sourceHeight=e),this._scaleY=e/this._sourceHeight,this._height!=e&&(this._height=e,this.update=!0),this.anchorY&&(this.container.anchorOffsetY=this.height*this.anchorY)}),r.onResourceLoaded=function(e){return{instances:[this],status:!0}},r.subtractFrom=function(t,n){var i=e.eval_e(n);e.assert("number"!=typeof i,"AIObject subtractFrom parameter type incorrect!!"),this[t]-=i},r.clone=function(){var e=new n;e.name=this.name,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e.scale=this.scale,e.scaleX=this.scaleX,e.scaleY=this.scaleY,e.angle=this.angle,e.alpha=this.alpha,e.visible=this.visible,e.mirrored=this.mirrored,e.collision=this.collision,e.anchorX=this.anchorX,e.anchorY=this.anchorY,e.global=this.global,e.layer=this.layer,e.collisionsEnabled=this.collisionsEnabled,e.collisionData=this.collisionData,e.collisionType=this.collisionType,e.collisionVectorData=this.collisionVectorData,e.collisionSourceVectorData=this.collisionSourceVectorData,e.createBitmap(this._bitmapURL),e.behaviors=[];for(var t=0;t<this.behaviors.length;t++){var i=this.behaviors[t],a=i.clone();e.addBehavior(a),a.onCreate()}for(var r in this.variables)e.addVariable(r,this.variables[r]);return e},n}(e.AIDisplayObject);e.AISprite=t,egret.registerClass(t,"ls.AISprite");var n=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnResourceLoadedEvent=n,egret.registerClass(n,"ls.OnResourceLoadedEvent")}(ls||(ls={}));var ls;!function(e){var t=function(t){function n(){if(t.call(this),this._heading=0,this._lastUpdate=0,this._lastTime=0,this.SHAKE_THRESHOLD=1e3,this.isShakeble=!0,this.disableDataEvents={},null!=n._instance)throw new Error("AISystem 为单例！！！");this.name="System",n._instance=this,this.onDevice(),this.onGetGeolocation(),this.onDeviceMotion(),this.onDeviceVibrate()}__extends(n,t);var i=__define,a=n,r=a.prototype;return r.onDevice=function(){this._orientation=new egret.DeviceOrientation,this._orientation.addEventListener(egret.OrientationEvent.CHANGE,this.onOrientation,this)},r.onOrientation=function(t){this._alpha=t.alpha,this._beta=t.beta,this._gamma=t.gamma,this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onDeviceOrientationChanged))},r.onGetGeolocation=function(){this._gps=new egret.Geolocation,this._gps.addEventListener(egret.GeolocationEvent.CHANGE,this.onGeolocation,this),this._gps.addEventListener(egret.GeolocationEvent.PERMISSION_DENIED,this.onGeolocation,this),this._gps.addEventListener(egret.GeolocationEvent.UNAVAILABLE,this.onGeolocation,this)},r.onGeolocation=function(t){switch(t.type){case egret.GeolocationEvent.CHANGE:this._latitude=t.latitude,this._longitude=t.longitude,this._altitude=t.altitude,this._speed=t.speed,this._heading=t.heading,this._accuracy=t.accuracy,this._altitudeAccuracy=t.altitudeAccuracy,this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onDevicePostionChanged));break;case egret.GeolocationEvent.PERMISSION_DENIED:this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onGeolocationPermissionDenied));break;default:this._geolocationErrorMessage=t.errorMessage,this._geolocationErrorType=t.errorType,this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onGeolocationFail))}},r.onDeviceMotion=function(){window.DeviceMotionEvent&&window.addEventListener("devicemotion",this.ondeviceMotionHandler,!1)},r.ondeviceMotionHandler=function(t){var i=n.instance;i._curTime=egret.getTimer();var a=i._curTime-i._lastUpdate;if(a>100){var r=t.accelerationIncludingGravity;i._lastUpdate=i._curTime,i._x=r.x,i._y=r.y,i._z=r.z;var s=Math.abs(i._x+i._y+i._z-i._lastX-i._lastY-i._lastZ)/a*1e4;s>i.SHAKE_THRESHOLD&&i._curTime-i._lastTime>1100&&i.isShakeble&&(i._lastTime=i._curTime,i.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,i.onDeviceShake))),i._lastX=i._x,i._lastY=i._y,i._lastZ=i._z}},r.onDeviceVibrate=function(){window.navigator.vibrate},i(n,"instance",function(){return null==this._instance&&(this._instance=new n),this._instance}),r.sendSceneInitComplete=function(){this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onSceneInitComplete))},r.runOs=function(t){var n=e.eval_e(t.os);return{instances:[this],status:n==egret.Capabilities.os}},r.isMobile=function(t){return{instances:[this],status:e.eval_e(t.mobile)==egret.Capabilities.isMobile}},r.onRunTimeType=function(t){return{instances:[this],status:e.eval_e(t.runtimeType)==egret.Capabilities.runtimeType}},r.runLanguageType=function(t){return{instances:[this],status:e.eval_e(t.language)==egret.Capabilities.language}},r.onGeolocationPermissionDenied=function(e){return{instances:[this],status:!0}},r.onGeolocationFail=function(e){return{instances:[this],status:!0}},r.onDeviceShake=function(e){return{instances:[this],status:!0}},r.onDevicePostionChanged=function(e){return{instances:[this],status:!0}},r.onDeviceOrientationChanged=function(e){return{instances:[this],status:!0}},r.onGameDataLoadComplete=function(e){return{instances:[this],status:!0}},r.onGameDataSaveComplete=function(e){return{instances:[this],status:!0}},r.everyTick=function(e){return{instances:[this],status:!0}},r.everyXSecondEvent=function(t){return t.curTime=egret.getTimer(),t.curTime-t.oldTime>=1e3*e.eval_e(t.interval)?(t.oldTime=t.curTime,{instances:[this],status:!0}):{instances:[this],status:!1}},r.onSceneInitComplete=function(e){return{instances:[this],status:!0}},r.onSceneEndComplete=function(e){return{instances:[this],status:!0}},r.isValueType=function(e){return{instances:[this],status:!0}},r.ObjectUIDExist=function(t){return{instances:[this],status:null!=e.LayoutDecoder.curSceneInstances[e.eval_e(t.UID)]}},r.pickRandomInstance=function(t){var n=e.World.getInstance().objectHash[t.object.name],i=n[Math.floor(Math.random()*n.length)];return{instances:[i],status:n&&n.length>0,selectSingle:!0}},r.pickAll=function(t){var n=e.World.getInstance().objectHash[t.object.name];return{instances:n,status:!0}},r.pickInstanceByCondition=function(t){var n=[],i=e.World.getInstance().objectHash[t.object.name];if(i)for(var a=0;a<i.length;a++){var r=i[a];window[r.name]=r;var s=e.compare(t.expression,t.operationType,t.value);s&&n.push(r)}return n.length>0?{instances:n,status:!0}:{instances:[this],status:!1}},r.pickInstanceByIndex=function(t){var n=e.World.getInstance().objectHash[t.object.name];if(n){var i=e.eval_e(t.index);if(i<n.length-1&&i>=0)return{instances:[n[i]],status:!0}}return{instances:[this],status:!1}},r.pickInstanceOverlapping=function(t){var n=e.World.getInstance().objectHash[t.object.name];if(n){for(var i=[],a=e.eval_e(t.x),r=e.eval_e(t.y),s=0;s<n.length;s++){var o=n[s],l=o.getGlobalBounds();l.contains(a,r)&&i.push(o)}if(i.length>0)return{instances:i,status:!0}}return{instances:[this],status:!1}},r.execFor=function(e){return{instances:[this],status:!0,data:e}},r.execForEachSort=function(e){return{instances:[this],status:!0,data:e}},r.compareVariable=function(t){return{instances:[this],status:e.compare(n.instance[t.variable],t.operationType,t.value)}},r.onLayerIsExist=function(t){return{instances:[this],status:null!=e.LayerManager.getLayer(e.eval_e(t.layer))}},r.onLayerIsVisible=function(t){var n=e.LayerManager.getLayer(e.eval_e(t.layer));return n?{instances:[this],status:n.visible==e.eval_e(1==t.isVisible)}:{instances:[this],status:!1}},r.createObject=function(t,n,i,a){var r=e.eval_e(n),s=e.eval_e(i),o=e.eval_e(a);e.assert("number"!=typeof r||"number"!=typeof s||"number"!=typeof o,"AISystem createObject parameter type incorrect!!");var l=t.clone();return l.layer=r,l.x=Math.round(s),l.y=Math.round(o),e.lakeshoreInst()[l.name]=l,e.World.getInstance().addChild(l),[l]},r.gotoScene=function(t){egret.callLater(function(){this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onSceneEndComplete)),e.World.getInstance().destory(),t=t,e.StartUp.onConfigLoad(t)},this)},r.disableEvents=function(t,n){var i,a=e.eval_e(t),r=n+"";if(0!=r.length){i=1==r.length?[r]:r.split(",");for(var s=0;s<i.length;s++){var o=+i[s];1==a?delete this.disableDataEvents[o]:this.disableDataEvents[o]=o}}},r.showLoadingLogo=function(t){var t=e.eval_e(t);e.GameUILayer.stage.addChild(e.GameUILayer.preContainer),e.GameUILayer.preContainer.alpha=1;var n=egret.Tween.get(e.GameUILayer.preContainer);n.wait(1e3*t-250),n.to({alpha:0},250),setTimeout(function(){e.GameUILayer.stage.removeChild(e.GameUILayer.preContainer)},1e3*t)},r.onScenePauseOrPlay=function(t){var t=e.eval_e(t);e.EventSheetDecoder.execScenePauseOrPlay(t)},r.addTo=function(t,i){var a=e.eval_e(i);e.assert("number"!=typeof a,"AIObject addTo parameter type incorrect!!"),n.instance[t]+=a},r.setBoolean=function(t,i){var a=e.eval_e(i);e.assert("number"!=typeof a,"AIObject setBoolean parameter type incorrect!!"),n.instance[t]=1==a},r.setValue=function(t,i){var a=e.eval_e(i);n.instance[t]=a},r.subtractFrom=function(t,i){var a=e.eval_e(i);e.assert("number"!=typeof a,"AIObject subtractFrom parameter type incorrect!!"),n.instance[t]-=a},r.toogleBoolean=function(e){this[e]=!this[e]},r.stopLoop=function(){},r.load=function(e){},r.restartScene=function(){e.assert(null==e.LayoutDecoder.currentLayoutName,"current layout name is null!"),this.gotoScene(e.LayoutDecoder.currentLayoutName)},r.resetGlobalVariables=function(){},r.scrollToObject=function(t){var n=t.getFirstPicked();n&&e.World.getInstance().sceneCamera.lookAtChar(n)},r.scrollToPos=function(t,n){var i=e.eval_e(t),a=e.eval_e(n);e.World.getInstance().sceneCamera.lookAtPoint(new egret.Point(i,a))},r.scrollToXPos=function(t){var n=e.eval_e(t);e.World.getInstance().sceneCamera.lookAtX(n)},r.scrollToYPos=function(t){var n=e.eval_e(t);e.World.getInstance().sceneCamera.lookAtY(n)},r.setLayerAngle=function(t,n){var t=e.eval_e(t),n=e.eval_e(n),i=e.LayerManager.getLayer(t);i&&(i.rotation=n)},r.setLayerBgColor=function(t,n){var t=e.eval_e(t),n=e.eval_e(n),i=e.LayerManager.getLayer(t);if(i){var a=i.numChildren;if(a>0)for(var r=Number.MAX_VALUE,s=Number.MAX_VALUE,o=0;a>o;o++){var l=i.getChildAt(o);l.x-l.anchorOffsetX<r&&(r=l.x-l.anchorOffsetX),l.y-l.anchorOffsetY<s&&(s=l.y-l.anchorOffsetY)}i.graphics.clear(),i.graphics.beginFill(n),i.graphics.drawRect(r,s,i.width,i.height),i.graphics.endFill()}},r.setLayerAlpha=function(t,n){var t=e.eval_e(t),n=e.eval_e(n),i=e.LayerManager.getLayer(t);i&&(i.alpha=n)},r.setLayerParallax=function(t,n,i){for(var t=e.eval_e(t),n=e.eval_e(n),i=e.eval_e(i),a=e.World.getInstance().objectList,r=0;r<a.length;r++){var s=a[r];s.index==t&&(s.parallaxX=n,s.parallaxY=i)}},r.setLayerScale=function(t,n,i){var t=e.eval_e(t),n=e.eval_e(n),i=e.eval_e(i),a=e.LayerManager.getLayer(t);a&&(a.scaleX=n/100,a.scaleY=i/100)},r.setLayerVisible=function(t,n){var t=e.eval_e(t),n=e.eval_e(n),i=e.LayerManager.getLayer(t);i&&(i.visible=1==n)},r.setObjectTimeScale=function(e,t){},r.setTimeScale=function(e){},r.startDeviceOrientation=function(t){var n=e.eval_e(t);this._orientation&&(0==n?this._orientation.stop():this._orientation.start())},r.startDeviceGeolocation=function(t){var n=e.eval_e(t);this._gps&&(0==n?this._gps.stop():this._gps.start())},r.onLoadComplete=function(){},r.loadStorageFromJSON=function(t){if("undefined"==typeof localStorage)return void e.assert(!0,"当前浏览器不支持本地存储");var t=e.eval_e(t),n=localStorage.getItem(t),i=JSON.parse(n),a=e.World.getInstance().objectList;if(a)for(var r=0;r<a.length;r++){var s=a[r],o=i[s.u_id];s.loadFromJSON(o)}console.log("数据更新！！"),this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onGameDataLoadComplete,t))},r.saveStorageToJSON=function(t){if("undefined"==typeof localStorage)return void e.assert(!0,"当前浏览器不支持本地存储");var t=e.eval_e(t),n=localStorage.getItem(t),i=n?JSON.parse(n):{},a=e.World.getInstance().objectList;if(a)for(var r=0;r<a.length;r++){var s=a[r];i[s.u_id]=s.saveToJSON()}var o=JSON.stringify(i);localStorage.setItem(t,o),console.log(o),this.dispatchEvent(new e.TriggerEvent(e.TriggerEvent.TRIGGER,this.onGameDataSaveComplete,t))},r.destory=function(){},i(r,"alpha",function(){return this._alpha}),i(r,"beta",function(){return this._beta}),i(r,"gamma",function(){return this._gamma}),i(r,"latitude",function(){return this._latitude}),i(r,"longitude",function(){return this._longitude}),i(r,"altitude",function(){return this._altitude}),i(r,"speed",function(){return this._speed}),i(r,"heading",function(){return this._heading}),i(r,"accuracy",function(){return this._accuracy}),i(r,"altitudeAccuracy",function(){return this._altitudeAccuracy}),i(r,"geolocationErrorMessage",function(){return this._geolocationErrorMessage}),i(r,"geolocationErrorType",function(){return this._geolocationErrorType}),n}(e.AIObject);e.AISystem=t,egret.registerClass(t,"ls.AISystem");var n=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.RunOsEvent=n,egret.registerClass(n,"ls.RunOsEvent");var i=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.IsMobileEvent=i,egret.registerClass(i,"ls.IsMobileEvent");var a=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.RuntimeTypeEvent=a,egret.registerClass(a,"ls.RuntimeTypeEvent");var r=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.RunLanguageEvent=r,egret.registerClass(r,"ls.RunLanguageEvent");var s=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnGeolocationPermissionDeniedEvent=s,egret.registerClass(s,"ls.OnGeolocationPermissionDeniedEvent");var o=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnGeolocationFailEvent=o,egret.registerClass(o,"ls.OnGeolocationFailEvent");var l=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnDeviceShakeEvent=l,egret.registerClass(l,"ls.OnDeviceShakeEvent");var c=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnDevicePositionChangedEvent=c,egret.registerClass(c,"ls.OnDevicePositionChangedEvent");var h=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.onDeviceOrientationChangedEvent=h,egret.registerClass(h,"ls.onDeviceOrientationChangedEvent");var u=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.EveryTickEvent=u,egret.registerClass(u,"ls.EveryTickEvent");var v=function(e){function t(){e.call(this),this.interval=0,this.oldTime=0,this.curTime=0}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.EveryXSecondsEvent=v,egret.registerClass(v,"ls.EveryXSecondsEvent");var f=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnSceneInitCompleteEvent=f,egret.registerClass(f,"ls.OnSceneInitCompleteEvent");var g=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnSceneEndCompleteEvent=g,egret.registerClass(g,"ls.OnSceneEndCompleteEvent");var d=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.IsValueTypeEvent=d,egret.registerClass(d,"ls.IsValueTypeEvent");var p=function(e){function t(){e.call(this),this.UID=0}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.ObjectUIDExistEvent=p,egret.registerClass(p,"ls.ObjectUIDExistEvent");var y=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.PickRandomInstanceEvent=y,egret.registerClass(y,"ls.PickRandomInstanceEvent");var _=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.PickAllEvent=_,egret.registerClass(_,"ls.PickAllEvent");var m=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.PickByComparisionEvent=m,egret.registerClass(m,"ls.PickByComparisionEvent");var b=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.PickInstanceByIndexEvent=b,egret.registerClass(b,"ls.PickInstanceByIndexEvent");var x=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.PickInstanecOverlappingEvent=x,egret.registerClass(x,"ls.PickInstanecOverlappingEvent");var E=function(e){function t(){e.call(this)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.CompareVariableEvent=E,egret.registerClass(E,"ls.CompareVariableEvent");var C=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.ForEachOrderEvent=C,egret.registerClass(C,"ls.ForEachOrderEvent");var I=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.ForEvent=I,egret.registerClass(I,"ls.ForEvent");var S=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnGameDataLoadCompleteEvent=S,egret.registerClass(S,"ls.OnGameDataLoadCompleteEvent");var T=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnGameDataSaveCompleteEvent=T,egret.registerClass(T,"ls.OnGameDataSaveCompleteEvent");var D=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnLayerIsExistEvent=D,egret.registerClass(D,"ls.OnLayerIsExistEvent");var O=function(e){function t(){e.apply(this,arguments)}__extends(t,e);var n=(__define,t);n.prototype;return t}(e.BaseEvent);e.OnLayerIsVisibleEvent=O,egret.registerClass(O,"ls.OnLayerIsVisibleEvent")}(ls||(ls={}));var ls;!function(e){var t=function(){function t(){}var n=(__define,t);n.prototype;return t.register=function(t){t.addEventListener(e.TriggerEvent.TRIGGER,this.onTrigger,this)},t.removeTrigger=function(t){t.removeEventListener(e.TriggerEvent.TRIGGER,this.onTrigger,this)},t.removeAllTriggers=function(){for(var t=0,n=e.World.getInstance().objectList.length;n>t;t++)this.removeTrigger(e.World.getInstance().objectList[t])},t.onTrigger=function(t){for(var n=e.AISystem.instance.disableDataEvents,i=e.EventSheetDecoder.triggerConditions,a=t.target,r=a instanceof e.BaseBehavior,s=0;s<i.length;s++){var o=i[s];if(void 0==n[o.event.index+1]&&o.callCondition==t.triggerCondition)if(o.isFamily)if(r){var l=null,c=e.EventSheetDecoder.curFamilys[o.targetName].insts;if(c)for(var h=0;h<c.length;h++){var u=c[h];if(u.name==a.inst.name){l=u;break}}else e.assert(!0,"组触发条件目标查找失败,组名："+o.targetName);if(l){var v=e.EventSheetDecoder.curFamilys[o.targetName];if(t.triggerData){var f=o.paramsInstance,g=f.data,d=g.children,p=!1;if(d&&d.length>0)for(var y=0;y<d.length;y++){var _=d[y];if(t.triggerData==_.$value){p=!0;break}}p&&e.EventSheetDecoder.execEvent(o.event,!0,[l],a,o,v)}else e.EventSheetDecoder.execEvent(o.event,!0,[l],a,o,v)}}else{var l=null,c=e.EventSheetDecoder.curFamilys[o.targetName].insts;if(c)for(var h=0;h<c.length;h++){var u=c[h];if(u.name==a.name){l=u;break}}else e.assert(!0,"组触发条件目标查找失败,组名："+o.targetName);if(l)if(t.triggerData){var f=o.paramsInstance,g=f.data,d=g.children,p=!1;if(d&&d.length>0)for(var y=0;y<d.length;y++){var _=d[y];if("onCollisionWithOtherObject"==o.callConditionName){if(t.triggerData.name==_.$value){p=!0,e.EventSheetDecoder.execEvent(o.event,!0,[l,t.triggerData],null,o);break}}else if(t.triggerData==_.$value){p=!0,e.EventSheetDecoder.execEvent(o.event,!0,[l],null,o);break}}}else e.EventSheetDecoder.execEvent(o.event,!0,[l],null,o)}else if(r){if(o.callTarget.name==a.name&&o.targetName==a.inst.name)if(t.triggerData){var f=o.paramsInstance,g=f.data,d=g.children,p=!1;if(d&&d.length>0)for(var y=0;y<d.length;y++){var _=d[y];if(t.triggerData==_.$value){p=!0;break}}p&&e.EventSheetDecoder.execEvent(o.event,!0,[a.inst],a,o)}else e.EventSheetDecoder.execEvent(o.event,!0,[a.inst],a,o)}else{var l=null;if(o.targetName==a.name&&(l=a),l)if(t.triggerData){var f=o.paramsInstance,g=f.data,d=g.children,p=!1;if(d&&d.length>0)for(var y=0;y<d.length;y++){var _=d[y];if("onCollisionWithOtherObject"==o.callConditionName){if(f.isFamily){var v=e.EventSheetDecoder.curFamilys[_.$value];if(v.insts)for(var m=0;m<v.insts.length;m++)if(t.triggerData.name==v.insts[m].name){p=!0,e.EventSheetDecoder.execEvent(o.event,!0,[l,t.triggerData],null,o);break}}else if(t.triggerData.name==_.$value){p=!0,e.EventSheetDecoder.execEvent(o.event,!0,[l,t.triggerData],null,o);break}}else if(t.triggerData==_.$value){p=!0,e.EventSheetDecoder.execEvent(o.event,!0,[l],null,o);break}}}else e.EventSheetDecoder.execEvent(o.event,!0,[l],null,o)}}},t.onTrigger2=function(t){for(var n=e.AISystem.instance.disableDataEvents,i=e.EventSheetDecoder.triggerConditions,a=t.target,r=a instanceof e.BaseBehavior,s=0;s<i.length;s++){var o=i[s];if(void 0==n[o.event.index+1]&&o.callCondition==t.triggerCondition)if(r){if(o.callTarget.name==a.name&&o.targetName==a.inst.name)if(t.triggerData){var l=o.paramsInstance,c=l.data,h=c.children,u=!1;if(h&&h.length>0)for(var v=0;v<h.length;v++){var f=h[v];if(t.triggerData==f.$value){u=!0;break}}u&&e.EventSheetDecoder.execEvent(o.event,!0,[a.inst],a,o)}else e.EventSheetDecoder.execEvent(o.event,!0,[a.inst],a,o)}else{var g=null;if(o.isFamily){var d=e.EventSheetDecoder.curFamilys[o.targetName].insts;if(d)for(var p=0;p<d.length;p++){var y=d[p];if(y.name==a.name){g=y;break}}else e.assert(!0,"组触发条件目标查找失败,组名："+o.targetName)}else o.targetName==a.name&&(g=a);if(g)if(t.triggerData){var l=o.paramsInstance,c=l.data,h=c.children,u=!1;if(h&&h.length>0)for(var v=0;v<h.length;v++){var f=h[v];if("onCollisionWithOtherObject"==o.callConditionName){if(t.triggerData.name==f.$value){u=!0,e.EventSheetDecoder.execEvent(o.event,!0,[g,t.triggerData],null,o);break}}else if(t.triggerData==f.$value){u=!0,e.EventSheetDecoder.execEvent(o.event,!0,[g],null,o);break}}}else e.EventSheetDecoder.execEvent(o.event,!0,[g],null,o)}}},t}();e.Trigger=t,egret.registerClass(t,"ls.Trigger")}(ls||(ls={}));var ls;!function(e){var t=function(){function t(){}var n=__define,i=t;i.prototype;return n(t,"nativeBase64",function(){return"function"==typeof window.atob}),t.decode=function(e){if(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,""),this.nativeBase64)return window.atob(e);for(var t,n,i,a,r,s,o,l=[],c=0;c<e.length;)a=this._keyStr.indexOf(e.charAt(c++)),r=this._keyStr.indexOf(e.charAt(c++)),s=this._keyStr.indexOf(e.charAt(c++)),o=this._keyStr.indexOf(e.charAt(c++)),t=a<<2|r>>4,n=(15&r)<<4|s>>2,i=(3&s)<<6|o,l.push(String.fromCharCode(t)),64!==s&&l.push(String.fromCharCode(n)),64!==o&&l.push(String.fromCharCode(i));return l=l.join("")},t.encode=function(e){if(e=e.replace(/\r\n/g,"\n"),!this.nativeBase64){for(var t,n,i,a,r,s,o,l=[],c=0;c<e.length;)t=e.charCodeAt(c++),n=e.charCodeAt(c++),i=e.charCodeAt(c++),a=t>>2,r=(3&t)<<4|n>>4,s=(15&n)<<2|i>>6,o=63&i,isNaN(n)?s=o=64:isNaN(i)&&(o=64),l.push(this._keyStr.charAt(a)),l.push(this._keyStr.charAt(r)),l.push(this._keyStr.charAt(s)),l.push(this._keyStr.charAt(o));return l=l.join("")}window.btoa(e)},t.decodeBase64AsArray=function(e,n){n=n||1;var i,a,r,s=t.decode(e),o=new Uint32Array(s.length/n);for(i=0,r=s.length/n;r>i;i++)for(o[i]=0,a=n-1;a>=0;--a)o[i]+=s.charCodeAt(i*n+a)<<(a<<3);return o},t.decompress=function(t,n,i){e.assert(!0,"GZIP/ZLIB compressed TMX Tile Map not supported!")},t.decodeCSV=function(e){for(var t=e.replace("\n","").trim().split(","),n=[],i=0;i<t.length;i++)n.push(+t[i]);return n},t._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t}();e.Base64=t,egret.registerClass(t,"ls.Base64")}(ls||(ls={}));var ls;!function(e){var t=function(){function t(){}var n=(__define,t);n.prototype;return t.isCollision=function(e,t,n,i,a,r){return e>=n&&n+a>=e&&t>=i&&i+r>=t},t.isCollsionWithRect=function(e,t,n,i,a,r,s,o){return e>=a&&e>=a+s?!1:a>=e&&a>=e+n?!1:t>=r&&t>=r+o?!1:r>=t&&r>=t+i?!1:!0},t.isCollisionPointWithCircle=function(e,t,n,i,a){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-i,2))<=a},t.isCollisionCircleWithCircle=function(e,t,n,i,a,r){return Math.sqrt(Math.pow(e-n,2)+Math.pow(t-i,2))<=a+r},t.isCollisionRectWithCircle=function(e,t,n,i,a,r,s){var o=.5*n,l=.5*i,c=a-(e+o),h=r-(t+l),u=Math.min(c,o),v=Math.max(u,-o),f=Math.min(h,l),g=Math.max(f,-l);return s*s>=(v-c)*(v-c)+(g-h)*(g-h)},t.checkPointCollideShape=function(e,t,n){var i=n.length;if(3>i)return!1;var a=0,r=[];for(a=0;a<n.length;a++){var s=new egret.Point(n[a].x,n[a].y);r.push(s)}for(a=0;a<r.length;a++)r[a].x+=t.x,r[a].y+=t.y;if(this.vectorCrossPoint(r[0],e,r[1])>0)return!1;if(this.vectorCrossPoint(r[0],e,r[i-1])<0)return!1;a=2;for(var o=i-1,l=-1;o>=a;){var c=a+o>>1;this.vectorCrossPoint(r[0],e,r[c])>0?(l=c,o=c-1):a=c+1}return 0>l?!1:this.vectorCrossPoint(r[l-1],e,r[l])<0},t.vectorCrossPoint=function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(n.x-e.x)*(t.y-e.y)},t.hitTest=function(e,t){for(var n=0;n<e.length;n++)for(var i=0;i<t.length;i++){var a=e[n],r=t[i];if(this.simpleLineTest(a,r))return!0}return!1},t.simpleLineTest=function(e,t){var n=e.p1x,i=e.p1y,a=e.p2x,r=e.p2y,s=t.p1x,o=t.p1y,l=t.p2x,c=t.p2y,h=(a-n)*(o-i)-(s-n)*(r-i),u=(a-n)*(c-i)-(l-n)*(r-i),v=(l-s)*(i-o)-(n-s)*(c-o),f=(l-s)*(r-o)-(a-s)*(c-o);return 0>=h*u&&0>=v*f},t.testOverlap=function(t,n){if(!t||!n||t===n)return!1;var i=!1;return 0!=t.angle||0!=n.angle?e.Collision.checkCollision(t,n):i=t.getGlobalBounds().intersects(n.getGlobalBounds())},t.getLines=function(t){var n=e.MathUtils.toRadian(t.angle),i=new egret.Matrix;i.translate(-t.width/2,-t.height/2),i.rotate(n);var a=new egret.Matrix;a.translate(t.width/2,-t.height/2),a.rotate(n);var r=new egret.Matrix;r.translate(t.width/2,t.height/2),r.rotate(n);var s=new egret.Matrix;s.translate(-t.width/2,t.height/2),s.rotate(n);var o=[],l={p1x:i.tx+t.x,p1y:i.ty+t.y,p2x:a.tx+t.x,p2y:a.tx+t.y},c={p1x:a.tx+t.x,p1y:a.ty+t.y,p2x:r.tx+t.x,p2y:r.ty+t.y},h={p1x:r.tx+t.x,p1y:r.ty+t.y,p2x:s.tx+t.x,p2y:s.ty+t.y},u={p1x:s.tx+t.x,p1y:s.ty+t.y,p2x:i.tx+t.x,p2y:i.ty+t.y};return o.push(l,c,h,u),o},t.testOverlapSolid=function(t){for(var n=e.World.getInstance().objectList,i=0;i<n.length;i++){var a=n[i];if(a!=t&&a.solidEnabeld&&this.testOverlap(t,a))return a}return null},t.testOverlapJumpThru=function(t,n){void 0===n&&(n=!1);var i=e.World.getInstance().objectList,a=null;n&&(a=[]);for(var r=0,s=i.length;s>r;r++){var o=i[r];if(o.jumpthruEnabled&&this.testOverlap(t,o)){if(!n)return[o];a.push(o)}}return a},t.pushInFractional=function(e,t,n,i,a){for(var r,s=2,o=!1,l=!1,c=e.x,h=e.y;a>=s;)r=1/s,s*=2,e.x+=t*r*(o?1:-1),e.y+=n*r*(o?1:-1),this.testOverlap(e,i)?(o=!0,l=!0):(o=!1,l=!1,c=e.x,h=e.y);l&&(e.x=c,e.y=h)},t.pushOutSolid=function(e,t,n,i,a,r){void 0===i&&(i=0),void 0===a&&(a=!1),void 0===r&&(r=null);for(var s=i||50,o=e.x,l=e.y,c=null,h=null,u=0;s>u;u++){e.x=o+t*u,e.y=l+n*u;var v=this.testOverlap(e,c);if(!v)if(c=this.testOverlapSolid(e))h=c;else if(a&&(c=r?this.testOverlap(e,r)?r:null:this.testOverlapJumpThru(e),c&&(h=c)),!c)return h&&this.pushInFractional(e,t,n,h,16),!0}return e.x=o,e.y=l,!1},t.pushOutSolidNearest=function(t,n){var i=e.is_undefined(i)?100:i,a=0,r=t.x,s=t.y,o=0,l=0,c=0,h=this.testOverlapSolid(t);if(!h)return!0;for(;i>a;){switch(o){case 0:l=0,c=-1,a++;break;case 1:l=1,c=-1;break;case 2:l=1,c=0;break;case 3:l=1,c=1;break;case 4:l=0,c=1;break;case 5:l=-1,c=1;break;case 6:l=-1,c=0;break;case 7:l=-1,c=-1}if(o=(o+1)%8,t.x=Math.floor(r+l*a),t.y=Math.floor(s+c*a),!this.testOverlap(t,h)&&(h=this.testOverlapSolid(t),!h))return!0}return t.x=r,t.y=s,!1},t.registerCollision=function(e,t){e.collisionsEnabled&&t.collisionsEnabled&&this.registered_collisions.push([e,t])},t.checkRegisteredCollision=function(e,t){for(var n=0;n<this.registered_collisions.length;n++){var i=this.registered_collisions[n];if(i[0]==e&&i[1]==t||i[0]==t&&i[1]==e)return!0}return!1},t.calculateSolidBounceAngle=function(t,n,i,a){void 0===a&&(a=null);var r=t.x,s=t.y,o=Math.max(10,e.distance(n,i,r,s)),l=e.MathUtils.angleTo(n,i,r,s),c=a||this.testOverlapSolid(t);if(!c)return e.MathUtils.clampRadian(l+Math.PI);for(var h=c,u=e.MathUtils.toRadian(5),v=1;36>v;v++){var f=l-v*u;if(t.x=n+Math.cos(f)*o,t.y=i+Math.sin(f)*o,!this.testOverlap(t,h)&&(h=a?null:this.testOverlapSolid(t),!h)){var g=f;break}}36==v&&(g=e.MathUtils.clampRadian(l+Math.PI));for(var d=c,v=1;36>v;v++)if(f=l+v*u,t.x=n+Math.cos(f)*o,t.y=i+Math.sin(f)*o,!this.testOverlap(t,d)&&(h=a?null:this.testOverlapSolid(t),!d))var p=f;if(36===v&&(p=e.MathUtils.clampRadian(l+Math.PI)),t.x=r,t.y=s,p==g)return p;var y=e.MathUtils.angleDiff(p,g)/2;if(e.MathUtils.angleClockWise(p,g))var _=e.MathUtils.clampRadian(g+y+Math.PI);else _=e.MathUtils.clampRadian(p+y);var m=Math.cos(l),b=Math.sin(l),x=Math.cos(_),E=Math.sin(_),C=m*x+b*E,I=m-2*C*E,S=b-2*C*E;return e.MathUtils.angleTo(0,0,I,S)},t.registered_collisions=[],t}();e.CollisionUtils=t,egret.registerClass(t,"ls.CollisionUtils")}(ls||(ls={}));var ls;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.toRadian=function(e){return e*this.TO_RADIAN},e.toAngle=function(e){return e*this.TO_ANGLE},e.clampAngle=function(e){return e%=360,0>e&&(e+=360),e},e.clampRadian=function(e){return e%=2*Math.PI,0>e&&(e+=2*Math.PI),e},e.angleRotate=function(e,t,n){var i=this.toRadian(e),a=this.toRadian(t),r=Math.sin(i),s=Math.cos(i),o=Math.sin(a),l=Math.cos(a);return Math.acos(r*o+s*l)>this.toRadian(n)?s*o-r*l>0?this.clampAngle(e+n):this.clampAngle(e-n):this.clampAngle(t)},e.angleRadius=function(e,t,n){var i=Math.sin(e),a=Math.cos(e),r=Math.sin(t),s=Math.cos(t);return Math.acos(i*r+a*s)>n?a*r-i*s>0?this.clampRadian(e+n):this.clampRadian(e-n):this.clampRadian(t)},e.angleClockWise=function(e,t){var n=this.toRadian(e),i=this.toRadian(t),a=Math.sin(n),r=Math.cos(n),s=Math.sin(i),o=Math.cos(i);return 0>=r*s-a*o},e.angleTo=function(e,t,n,i){return this.toAngle(Math.atan2(i-t,n-e))},e.radianTo=function(e,t,n,i){return Math.atan2(i-t,n-e)},e.distance=function(e,t,n,i){var a=n-e,r=i-t;return Math.sqrt(a*a+r*r)},e.color16ToUnit=function(e){var t="0x"+e.slice(1);return parseInt(t,16)},e.angleDiff=function(e,t){if(e===t)return 0;var n=Math.sin(e),i=Math.cos(e),a=Math.sin(t),r=Math.cos(t),s=n*a+i*r;return s>=1?0:-1>=s?Math.PI:Math.acos(s)},e.TO_RADIAN=Math.PI/180,e.TO_ANGLE=180/Math.PI,e}();e.MathUtils=t,egret.registerClass(t,"ls.MathUtils")
}(ls||(ls={}));var ls;!function(e){var t=function(){function e(){}var t=(__define,e);t.prototype;return e.compareVersion=function(e,t){var n=e.split("."),i=t.split("."),a=n[0]+"."+n[1];n[2]&&(a+=n[2]);var r=i[0]+"."+i[1];i[2]&&(r+=i[2]);var s=+a,o=+r;return s>o?1:s===o?0:-1},e.version="1.2",e}();e.Version=t,egret.registerClass(t,"ls.Version")}(ls||(ls={}));var ls;!function(e){var t=function(){function t(){}var n=(__define,t);n.prototype;return t.execute=function(e){this.stage=e.stage,this.onLayerInit(e),this.onPreResourceLoad()},t.onLayerInit=function(t){e.GameUILayer.init(t.stage),e.GameUILayer.document=t},t.onPreResourceLoad=function(){this.onProjectLoad("resource/assets/projects.xml")},t.onProjectLoad=function(t,n){void 0===n&&(n=null),RES.getResByUrl(t,function(t){var n=t.children;if(n)for(var i=0;i<n.length;i++){var a=n[i],r=a.localName;switch(r){case"sceneSize":e.Config.sceneWidth=+a.$width,e.Config.sceneHeight=+a.$height;break;case"info":e.StartUp.baseUrl=a.$baseUrl,e.Config.sceneInfo={layoutName:a.$layoutName,layoutUrl:a.$layoutUrl,eventsheetName:a.$eventsheetName,eventsheetUrl:a.$eventsheetUrl,baseUrl:e.StartUp.baseUrl},console.log("加载的布局文件地址：",e.Config.sceneInfo.baseUrl+e.Config.sceneInfo.layoutUrl);var s=this;s.onGlobalConfigLoad(e.Config.sceneInfo.baseUrl+"global.xml",function(){RES.getResByUrl(e.Config.sceneInfo.baseUrl+e.Config.sceneInfo.layoutUrl,function(t){e.Config.sceneInfo.layoutData=t,console.log("加载的逻辑文件地址：",e.Config.sceneInfo.baseUrl+e.Config.sceneInfo.eventsheetUrl),RES.getResByUrl(e.Config.sceneInfo.baseUrl+e.Config.sceneInfo.eventsheetUrl,function(t){e.Config.sceneInfo.eventsheetData=t,e.LayoutDecoder.start(e.Config.sceneInfo.layoutName),e.EventSheetDecoder.start(e.Config.sceneInfo.eventsheetName)},this)},e.Config.sceneInfo)},[e.Config.sceneInfo.layoutName]);break;case"internal":var o=a.children[0].text,l=JSON.parse(decodeURIComponent(o));e.internalData=l.internalComponents;break;case"version":e.Config.version=+a.text}}},this,RES.ResourceItem.TYPE_XML)},t.onGlobalConfigLoad=function(t,n,i){void 0===n&&(n=null),void 0===i&&(i=null),RES.getResByUrl(t,function(t){this.globalData=t,e.LayoutDecoder.globalInstances=e.LayoutDecoder.decodeInstances(this.globalData),null!=n&&n.apply(null,i)},this,RES.ResourceItem.TYPE_XML)},t.onConfigLoad=function(t){e.Config.sceneInfo.layoutName=t,e.Config.sceneInfo.layoutUrl=t+".xml",RES.getResByUrl(e.Config.sceneInfo.baseUrl+e.Config.sceneInfo.layoutUrl,function(t){e.Config.sceneInfo.layoutData=t,e.Config.sceneInfo.eventsheetName=t.$eventSheet,e.Config.sceneInfo.eventsheetUrl=e.Config.sceneInfo.eventsheetName+".xml",RES.getResByUrl(e.Config.sceneInfo.baseUrl+e.Config.sceneInfo.eventsheetUrl,function(t){e.Config.sceneInfo.eventsheetData=t,e.LayoutDecoder.start(e.Config.sceneInfo.layoutName),e.EventSheetDecoder.start(e.Config.sceneInfo.eventsheetName)},this)},this)},t}();e.StartUp=t,egret.registerClass(t,"ls.StartUp")}(ls||(ls={}));