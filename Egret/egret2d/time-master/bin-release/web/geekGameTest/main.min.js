var __reflect=this&&this.__reflect||function(t,e,i){t.__class__=e,i?i.push(e):i=[e],t.__types__=t.__types__?i.concat(t.__types__):i},__extends=this&&this.__extends||function(t,e){function i(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)},GeekMain=function(t){function e(){var e=t.call(this)||this;return e.n=6,e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.spr=new egret.Sprite,this.addChild(this.spr),this.spr.width=480,this.spr.height=800,this.drawTxt(),this.drawContent(),this.onButtonComp(),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onButtonComp,this),RES.loadConfig("resource/assets/mybtn.png"),RES.loadGroup("mybtn_png"),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onTouchSRP,this),RES.loadConfig("resource/assets/congzai.png"),RES.loadGroup("congzai_png"),this.timer=new egret.Timer(1e3,8),this.timer.addEventListener(egret.TimerEvent.TIMER,this.timerFunc,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.timerComFunc,this)},e.prototype.drawTxt=function(){this.num=new egret.TextField,this.num.text=this.n.toString(),this.num.size=100,this.num.width=630,this.num.textColor=65280,this.num.textAlign=egret.HorizontalAlign.CENTER,this.spr.addChild(this.num)},e.prototype.drawContent=function(){this.con=new egret.TextField,this.con.text="默默倒数6秒，迅速点击文字",this.con.textColor=65280,this.con.width=630,this.con.textAlign=egret.HorizontalAlign.CENTER,this.con.y=120,this.spr.addChild(this.con)},e.prototype.onButtonComp=function(){this.img=new egret.Bitmap,this.img.texture=RES.getRes("mybtn_png");var t=new egret.Rectangle(10,10,15,15);this.img.scale9Grid=t,this.img.y=200,this.img.x=230,this.img.width+=5,this.height=70,this.spr.addChild(this.img),this.img.touchEnabled=!0,this.img.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouch,this)},e.prototype.onTouch=function(t){this.date=new Date,this.startTime=this.date.getTime(),this.img.alpha=0,this.timer.start(),this.drawTxt(),this.spr.touchEnabled=!0,this.spr.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchSRP,this,!0)},e.prototype.timerFunc=function(){this.n<=3?this.num.text="?":(this.spr.removeChildren(),this.drawTxt()),this.n--},e.prototype.timerComFunc=function(){this.n<=-2&&(this.drawContent(),this.con.text="别模糊了赶紧醒醒!",this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchSRP,this,!0))},e.prototype.onTouchSRP=function(t){this.date=new Date,this.stopTime=this.date.getTime(),this.finalTimer=this.startTime-this.stopTime,this.num.text=(this.finalTimer/1e3+6).toFixed(3),this.timer.stop(),this.drawContent(),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchSRP,this,!0),this.spr.touchEnabled=!1,this.resetImg=new egret.Bitmap,this.resetImg.texture=RES.getRes("congzai_png");var e=new egret.Rectangle(30,30,15,15);switch(this.resetImg.scale9Grid=e,this.resetImg.y=400,this.resetImg.x=500,this.resetImg.width+=4,this.height=50,this.resetImg.touchEnabled=!0,this.spr.addChild(this.resetImg),this.resetImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onclickBtn,this),Math.floor(Math.abs(this.finalTimer/1e3+6))){case 0:this.con.text="你真棒！打败了全国百分之99的玩家。";break;case 1:this.con.text="很专注,还需要继续努力哦！";break;case 2:this.con.text="别模糊了，醒醒！"}},e.prototype.onclickBtn=function(t){this.spr.removeChildren(),this.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchSRP,this,!0),window.location.reload()},e}(egret.DisplayObjectContainer);__reflect(GeekMain.prototype,"GeekMain");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var Main=function(t){function e(){var e=t.call(this)||this;return e.addEventListener(egret.Event.ADDED_TO_STAGE,e.onAddToStage,e),e}return __extends(e,t),e.prototype.onAddToStage=function(t){this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.createGameScene())},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e.prototype.createGameScene=function(){this.addChild(new GeekMain)},e}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");